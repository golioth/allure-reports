# Golioth Allure Reports

This repo contains the history of Allure Reports generated by the Golioth
Firmware SDK CI tests. The SDK repo will automatically pull the history from
here, add newly generated data, and rebuilt the Allure webpage to be deployed
by GitHub Pages.

## Squashing the gd-pages branch

The size of the reports grows quickly as we run tests. From time to time, it
makes sense to squash older commits to save space. This [approach was posted by
user TTT on Stack Overflow](https://stackoverflow.com/a/73000056).

1. `git checkout gh-pages`
2. Get the branch root commit: `git log gh-pages --reverse`
    - Call this <old-repo-root-commit-id>
3. Get a commit from ~3 weeks ago: `git log`
    - Call this <new-repo-root-commit-id>
4. Run the following commands:

    ```
    git switch --detach <new-repo-root-commit-id>
    git reset --soft <old-repo-root-commit-id>
    git commit --amend --reuse-message=<new-repo-root-commit-id>
    git rebase <new-repo-root-commit-id> gh-pages --onto @
    git push --force
    ```
