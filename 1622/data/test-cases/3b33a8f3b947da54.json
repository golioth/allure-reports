{"uid":"3b33a8f3b947da54","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"2f204ffe20d9a076758a1035d6c7af62","time":{"start":1728520384987,"stop":1728520441716,"duration":56729},"status":"failed","statusMessage":"AssertionError: assert 7 == 6\n +  where 7 = int('7')","statusTrace":"board = <nrf52840dk.nRF52840DK object at 0xffff8ae266d0>\ndevice = <golioth.golioth.Device object at 0xffff8ad85450>\nproject = <golioth.golioth.Project object at 0xffff8bc41d50>\nreleases = {'test_blocks': Release <670720b63174be2c999a8e71, release_tags=[], device_tags=['670720b43174be2c999a8e6e'], artifact..., release_tags=[], device_tags=['670720b43174be2c999a8e6e'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 7 == 6\nE            +  where 7 = int('7')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1728520349333,"stop":1728520349333,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1728520349334,"stop":1728520349334,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1728520349335,"stop":1728520349335,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1728520349336,"stop":1728520349336,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1728520349336,"stop":1728520349337,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1728520349337,"stop":1728520349337,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1728520349338,"stop":1728520349338,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1728520349338,"stop":1728520349339,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1728520349339,"stop":1728520349340,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1728520349340,"stop":1728520349341,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1728520349341,"stop":1728520349341,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1728520349342,"stop":1728520349342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1728520349343,"stop":1728520362104,"duration":12761},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1728520362106,"stop":1728520362761,"duration":655},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1728520362762,"stop":1728520364057,"duration":1295},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1728520364058,"stop":1728520370957,"duration":6899},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1728520370959,"stop":1728520371573,"duration":614},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1728520371573,"stop":1728520372908,"duration":1335},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1728520372908,"stop":1728520375243,"duration":2335},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1728520384982,"stop":1728520384983,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 7 == 6\n +  where 7 = int('7')","statusTrace":"board = <nrf52840dk.nRF52840DK object at 0xffff8ae266d0>\ndevice = <golioth.golioth.Device object at 0xffff8ad85450>\nproject = <golioth.golioth.Project object at 0xffff8bc41d50>\nreleases = {'test_blocks': Release <670720b63174be2c999a8e71, release_tags=[], device_tags=['670720b43174be2c999a8e6e'], artifact..., release_tags=[], device_tags=['670720b43174be2c999a8e6e'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 7 == 6\nE            +  where 7 = int('7')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"bca453050fd8bbbd","name":"stdout","source":"bca453050fd8bbbd.txt","type":"text/plain","size":3293}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1728520441869,"stop":1728520443027,"duration":1158},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1728520443029,"stop":1728520445597,"duration":2568},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1728520445599,"stop":1728520446732,"duration":1133},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1728520446734,"stop":1728520446734,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1728520446736,"stop":1728520446736,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1728520446738,"stop":1728520447285,"duration":547},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1728520447287,"stop":1728520447287,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1728520447289,"stop":1728520447343,"duration":54},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"nrf52840dk"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.nrf52840dk"},{"name":"tag","value":"sams_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"0389fb973121"},{"name":"thread","value":"279-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'nrf52840dk'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":6,"broken":8,"skipped":0,"passed":113,"unknown":0,"total":127},"items":[{"uid":"a49927cbbe435ded","reportUrl":"https://golioth.github.io/allure-reports/1600//#testresult/a49927cbbe435ded","status":"passed","time":{"start":1728318289239,"stop":1728318366805,"duration":77566}},{"uid":"861c3182f62b4ed","reportUrl":"https://golioth.github.io/allure-reports/1621//#testresult/861c3182f62b4ed","status":"passed","time":{"start":1728491351358,"stop":1728491429133,"duration":77775}},{"uid":"59a9fd582acd94ae","reportUrl":"https://golioth.github.io/allure-reports/1619//#testresult/59a9fd582acd94ae","status":"passed","time":{"start":1728483288640,"stop":1728483367170,"duration":78530}},{"uid":"9dd76890e98e6a54","reportUrl":"https://golioth.github.io/allure-reports/1618//#testresult/9dd76890e98e6a54","status":"passed","time":{"start":1728434567417,"stop":1728434645140,"duration":77723}},{"uid":"741abc3e34ec0b36","reportUrl":"https://golioth.github.io/allure-reports/1617//#testresult/741abc3e34ec0b36","status":"passed","time":{"start":1728425197540,"stop":1728425275267,"duration":77727}},{"uid":"a7f2fb98e5f38d87","reportUrl":"https://golioth.github.io/allure-reports/1606//#testresult/a7f2fb98e5f38d87","status":"passed","time":{"start":1728330590872,"stop":1728330670985,"duration":80113}},{"uid":"437faadc44d09c00","reportUrl":"https://golioth.github.io/allure-reports/1604//#testresult/437faadc44d09c00","status":"passed","time":{"start":1728326219650,"stop":1728326297385,"duration":77735}},{"uid":"91074db47f058ec3","reportUrl":"https://golioth.github.io/allure-reports/1611//#testresult/91074db47f058ec3","status":"passed","time":{"start":1728339217863,"stop":1728339295401,"duration":77538}},{"uid":"1f45ac1d9b31211d","reportUrl":"https://golioth.github.io/allure-reports/1616//#testresult/1f45ac1d9b31211d","status":"broken","statusDetails":"httpx.ConnectTimeout","time":{"start":1728399347038,"stop":1728399363687,"duration":16649}},{"uid":"d254a94d2168ea99","reportUrl":"https://golioth.github.io/allure-reports/1611//#testresult/d254a94d2168ea99","status":"passed","time":{"start":1728339217863,"stop":1728339295401,"duration":77538}},{"uid":"74c463c39fc34fae","reportUrl":"https://golioth.github.io/allure-reports/1614//#testresult/74c463c39fc34fae","status":"passed","time":{"start":1728347615440,"stop":1728347693020,"duration":77580}},{"uid":"43c64f739ea9a382","reportUrl":"https://golioth.github.io/allure-reports/1613//#testresult/43c64f739ea9a382","status":"passed","time":{"start":1728340325569,"stop":1728340403379,"duration":77810}},{"uid":"b06585da4e83ca8c","reportUrl":"https://golioth.github.io/allure-reports/1611//#testresult/b06585da4e83ca8c","status":"passed","time":{"start":1728339217863,"stop":1728339295401,"duration":77538}},{"uid":"984ecb233ca42c8","reportUrl":"https://golioth.github.io/allure-reports/1609//#testresult/984ecb233ca42c8","status":"passed","time":{"start":1728336275981,"stop":1728336354243,"duration":78262}},{"uid":"17cf37bc42a8447f","reportUrl":"https://golioth.github.io/allure-reports/1599//#testresult/17cf37bc42a8447f","status":"passed","time":{"start":1728327379862,"stop":1728327458022,"duration":78160}},{"uid":"bebc27bb7633d285","reportUrl":"https://golioth.github.io/allure-reports/1600//#testresult/bebc27bb7633d285","status":"passed","time":{"start":1728318289239,"stop":1728318366805,"duration":77566}},{"uid":"a904de553e13a58f","reportUrl":"https://golioth.github.io/allure-reports/1600//#testresult/a904de553e13a58f","status":"passed","time":{"start":1728318289239,"stop":1728318366805,"duration":77566}},{"uid":"483dfd313bf5ac1a","reportUrl":"https://golioth.github.io/allure-reports/1599//#testresult/483dfd313bf5ac1a","status":"passed","time":{"start":1728316225926,"stop":1728316303828,"duration":77902}},{"uid":"c0ef8c9f2d10cc1f","reportUrl":"https://golioth.github.io/allure-reports/1597//#testresult/c0ef8c9f2d10cc1f","status":"passed","time":{"start":1728312355459,"stop":1728312433102,"duration":77643}},{"uid":"559cb80f2d60d491","reportUrl":"https://golioth.github.io/allure-reports/1588//#testresult/559cb80f2d60d491","status":"passed","time":{"start":1728133633765,"stop":1728133711416,"duration":77651}}]},"tags":["nrf52840dk","anyio","sams_orange_pi","@pytest.mark.usefixtures('anyio_backend')","zephyr"]},"source":"3b33a8f3b947da54.json","parameterValues":["'nrf52840dk'","'zephyr'"]}