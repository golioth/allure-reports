{"uid":"f6cc8dbe931dceaa","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"2f204ffe20d9a076758a1035d6c7af62","time":{"start":1727545056718,"stop":1727545113107,"duration":56389},"status":"failed","statusMessage":"AssertionError: assert 7 == 6\n +  where 7 = int('7')","statusTrace":"board = <nrf52840dk.nRF52840DK object at 0xffffbaa1d150>\ndevice = <golioth.golioth.Device object at 0xffffbaa1da90>\nproject = <golioth.golioth.Project object at 0xffffbaa1f1d0>\nreleases = {'test_blocks': Release <66f83ed60e704510295c96b7, release_tags=[], device_tags=['66f83ed50e704510295c96b4'], artifact..., release_tags=[], device_tags=['66f83ed50e704510295c96b4'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 7 == 6\nE            +  where 7 = int('7')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1727545022296,"stop":1727545022297,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1727545022297,"stop":1727545022297,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1727545022298,"stop":1727545022298,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1727545022299,"stop":1727545022299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1727545022299,"stop":1727545022300,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1727545022300,"stop":1727545022300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1727545022300,"stop":1727545022300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1727545022301,"stop":1727545022301,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1727545022301,"stop":1727545022301,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1727545022302,"stop":1727545022302,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1727545022303,"stop":1727545022304,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1727545022305,"stop":1727545022305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1727545022306,"stop":1727545035103,"duration":12797},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1727545035106,"stop":1727545035611,"duration":505},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1727545035612,"stop":1727545036436,"duration":824},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1727545036437,"stop":1727545044606,"duration":8169},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1727545044608,"stop":1727545045076,"duration":468},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1727545045077,"stop":1727545045841,"duration":764},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1727545045842,"stop":1727545047374,"duration":1532},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1727545056715,"stop":1727545056715,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 7 == 6\n +  where 7 = int('7')","statusTrace":"board = <nrf52840dk.nRF52840DK object at 0xffffbaa1d150>\ndevice = <golioth.golioth.Device object at 0xffffbaa1da90>\nproject = <golioth.golioth.Project object at 0xffffbaa1f1d0>\nreleases = {'test_blocks': Release <66f83ed60e704510295c96b7, release_tags=[], device_tags=['66f83ed50e704510295c96b4'], artifact..., release_tags=[], device_tags=['66f83ed50e704510295c96b4'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 7 == 6\nE            +  where 7 = int('7')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"2cd32800c4565b5d","name":"stdout","source":"2cd32800c4565b5d.txt","type":"text/plain","size":3297}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1727545113260,"stop":1727545114108,"duration":848},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1727545114110,"stop":1727545115540,"duration":1430},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1727545115542,"stop":1727545116273,"duration":731},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1727545116275,"stop":1727545116275,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1727545116277,"stop":1727545116277,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1727545116279,"stop":1727545116670,"duration":391},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1727545116672,"stop":1727545116672,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1727545116674,"stop":1727545116678,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"nrf52840dk"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.nrf52840dk"},{"name":"tag","value":"mikes_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"8b5f1e03b39b"},{"name":"thread","value":"276-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'nrf52840dk'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":1,"skipped":0,"passed":29,"unknown":0,"total":32},"items":[{"uid":"5c68e776fa7b41bb","reportUrl":"https://golioth.github.io/allure-reports/1473//#testresult/5c68e776fa7b41bb","status":"passed","time":{"start":1727542550113,"stop":1727542627602,"duration":77489}},{"uid":"d95b3078052b5594","reportUrl":"https://golioth.github.io/allure-reports/1470//#testresult/d95b3078052b5594","status":"passed","time":{"start":1727541162005,"stop":1727541239560,"duration":77555}},{"uid":"6edcfd61758539c9","reportUrl":"https://golioth.github.io/allure-reports/1468//#testresult/6edcfd61758539c9","status":"passed","time":{"start":1727483527569,"stop":1727483605744,"duration":78175}},{"uid":"c5b3fcefd70ac9d","reportUrl":"https://golioth.github.io/allure-reports/1467//#testresult/c5b3fcefd70ac9d","status":"passed","time":{"start":1727475523054,"stop":1727475600568,"duration":77514}},{"uid":"7b0b5507e5476914","reportUrl":"https://golioth.github.io/allure-reports/1466//#testresult/7b0b5507e5476914","status":"passed","time":{"start":1727460797440,"stop":1727460875116,"duration":77676}},{"uid":"2d5779b0ee59592f","reportUrl":"https://golioth.github.io/allure-reports/1466//#testresult/2d5779b0ee59592f","status":"passed","time":{"start":1727460797440,"stop":1727460875116,"duration":77676}},{"uid":"2b63b37c3e508cc0","reportUrl":"https://golioth.github.io/allure-reports/1436//#testresult/2b63b37c3e508cc0","status":"passed","time":{"start":1727458467301,"stop":1727458544801,"duration":77500}},{"uid":"5f0f48e6d9b53dfc","reportUrl":"https://golioth.github.io/allure-reports/1450//#testresult/5f0f48e6d9b53dfc","status":"passed","time":{"start":1727393341636,"stop":1727393419126,"duration":77490}},{"uid":"f032681b1293af55","reportUrl":"https://golioth.github.io/allure-reports/1462//#testresult/f032681b1293af55","status":"passed","time":{"start":1727387269400,"stop":1727387346970,"duration":77570}},{"uid":"4590a1882a47370d","reportUrl":"https://golioth.github.io/allure-reports/1437//#testresult/4590a1882a47370d","status":"passed","time":{"start":1727363619693,"stop":1727363699205,"duration":79512}},{"uid":"6193c4f587a7980e","reportUrl":"https://golioth.github.io/allure-reports/1450//#testresult/6193c4f587a7980e","status":"passed","time":{"start":1727393341636,"stop":1727393419126,"duration":77490}},{"uid":"922de63f430b3b5b","reportUrl":"https://golioth.github.io/allure-reports/1461//#testresult/922de63f430b3b5b","status":"passed","time":{"start":1727387928816,"stop":1727388006401,"duration":77585}},{"uid":"e2a861ef1a349ece","reportUrl":"https://golioth.github.io/allure-reports/1462//#testresult/e2a861ef1a349ece","status":"passed","time":{"start":1727387269400,"stop":1727387346970,"duration":77570}},{"uid":"c638cb093679e781","reportUrl":"https://golioth.github.io/allure-reports/1457//#testresult/c638cb093679e781","status":"passed","time":{"start":1727384128187,"stop":1727384206544,"duration":78357}},{"uid":"de42a1fb9fec4615","reportUrl":"https://golioth.github.io/allure-reports/1452//#testresult/de42a1fb9fec4615","status":"passed","time":{"start":1727381778246,"stop":1727381855839,"duration":77593}},{"uid":"65aee875faa87514","reportUrl":"https://golioth.github.io/allure-reports/1447//#testresult/65aee875faa87514","status":"passed","time":{"start":1727378500598,"stop":1727378578238,"duration":77640}},{"uid":"816971df304f50c3","reportUrl":"https://golioth.github.io/allure-reports/1433//#testresult/816971df304f50c3","status":"passed","time":{"start":1727359850766,"stop":1727359928538,"duration":77772}},{"uid":"9c4ca9ca76c462db","reportUrl":"https://golioth.github.io/allure-reports/1440//#testresult/9c4ca9ca76c462db","status":"passed","time":{"start":1727371168823,"stop":1727371246454,"duration":77631}},{"uid":"16bd4af534942fde","reportUrl":"https://golioth.github.io/allure-reports/1438//#testresult/16bd4af534942fde","status":"passed","time":{"start":1727366458373,"stop":1727366535942,"duration":77569}},{"uid":"99a56bd38ddc6a07","reportUrl":"https://golioth.github.io/allure-reports/1436//#testresult/99a56bd38ddc6a07","status":"passed","time":{"start":1727362750081,"stop":1727362828439,"duration":78358}}]},"tags":["mikes_orange_pi","nrf52840dk","anyio","@pytest.mark.usefixtures('anyio_backend')","zephyr"]},"source":"f6cc8dbe931dceaa.json","parameterValues":["'nrf52840dk'","'zephyr'"]}