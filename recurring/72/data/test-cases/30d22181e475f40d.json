{"uid":"30d22181e475f40d","name":"test_observation_cancel_all","fullName":"tests.hil.tests.rpc.test_rpc#test_observation_cancel_all","historyId":"bbc301babfb9330689ff40425ae8bfb7","time":{"start":1736870852584,"stop":1736870862065,"duration":9481},"status":"broken","statusMessage":"KeyError: 'statusCode'","statusTrace":"board = <linuxboard.LinuxBoard object at 0x7f23d92ecce0>\ndevice = <golioth.golioth.Device object at 0x7f23d92032f0>\n\n    async def test_observation_cancel_all(board, device):\n        rsp = await device.rpc.cancel_all()\n    \n        assert None != await board.wait_for_regex_in_line('Cancelling observations', timeout_s=10)\n        assert None != await board.wait_for_regex_in_line('Observations cancelled', timeout_s=10)\n    \n        with pytest.raises(RPCTimeout):\n>           rsp = await device.rpc.basic_return_type(\"int\")\n\ntests/hil/tests/rpc/test_rpc.py:94: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.local/lib/python3.12/site-packages/golioth/golioth.py:656: in call_method\n    return await self.call(name, params)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <golioth.golioth.DeviceRPC object at 0x7f23d92efa10>\nmethod = 'basic_return_type', params = ('int',)\n\n    async def call(self, method: str, params: Union[list, dict]):\n        async with self.http_client as c:\n            try:\n                response = await c.post('rpc', json={\n                    \"method\": method,\n                    \"params\": params,\n                })\n            except httpx.ReadTimeout as e:\n                raise RPCTimeout() from e\n    \n            json_response = response.json()\n    \n>           if json_response['statusCode'] == 0:\nE           KeyError: 'statusCode'\n\n../../../.local/lib/python3.12/site-packages/golioth/golioth.py:642: KeyError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"baud","time":{"start":1736870821522,"stop":1736870821523,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1736870821522,"stop":1736870821522,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1736870821522,"stop":1736870821522,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"anyio_backend","time":{"start":1736870821522,"stop":1736870821522,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1736870821523,"stop":1736870821523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1736870821523,"stop":1736870821523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1736870821523,"stop":1736870821523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1736870821523,"stop":1736870821523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1736870821523,"stop":1736870821523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1736870821523,"stop":1736870821523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1736870821523,"stop":1736870821523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1736870821523,"stop":1736870821874,"duration":351},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1736870821523,"stop":1736870821523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1736870821874,"stop":1736870821874,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1736870821874,"stop":1736870822488,"duration":614},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1736870822488,"stop":1736870823190,"duration":702},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"KeyError: 'statusCode'","statusTrace":"board = <linuxboard.LinuxBoard object at 0x7f23d92ecce0>\ndevice = <golioth.golioth.Device object at 0x7f23d92032f0>\n\n    async def test_observation_cancel_all(board, device):\n        rsp = await device.rpc.cancel_all()\n    \n        assert None != await board.wait_for_regex_in_line('Cancelling observations', timeout_s=10)\n        assert None != await board.wait_for_regex_in_line('Observations cancelled', timeout_s=10)\n    \n        with pytest.raises(RPCTimeout):\n>           rsp = await device.rpc.basic_return_type(\"int\")\n\ntests/hil/tests/rpc/test_rpc.py:94: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.local/lib/python3.12/site-packages/golioth/golioth.py:656: in call_method\n    return await self.call(name, params)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <golioth.golioth.DeviceRPC object at 0x7f23d92efa10>\nmethod = 'basic_return_type', params = ('int',)\n\n    async def call(self, method: str, params: Union[list, dict]):\n        async with self.http_client as c:\n            try:\n                response = await c.post('rpc', json={\n                    \"method\": method,\n                    \"params\": params,\n                })\n            except httpx.ReadTimeout as e:\n                raise RPCTimeout() from e\n    \n            json_response = response.json()\n    \n>           if json_response['statusCode'] == 0:\nE           KeyError: 'statusCode'\n\n../../../.local/lib/python3.12/site-packages/golioth/golioth.py:642: KeyError","steps":[],"attachments":[{"uid":"1afdb1738623fc1a","name":"stdout","source":"1afdb1738623fc1a.txt","type":"text/plain","size":164}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup::0","time":{"start":1736870862108,"stop":1736870862108,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1736870862108,"stop":1736870862307,"duration":199},"status":"broken","statusMessage":"httpx.HTTPStatusError: Server error '502 Bad Gateway' for url 'https://api.golioth.io/v1/projects/firmware_ci/devices/67868ba65ec38cdb40fad92f'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502\n","statusTrace":"  File \"/home/runner/.local/lib/python3.12/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/_pytest/fixtures.py\", line 907, in _teardown_yield_fixture\n    next(it)\n  File \"/home/runner/.local/lib/python3.12/site-packages/anyio/pytest_plugin.py\", line 98, in wrapper\n    yield from runner.run_asyncgen_fixture(local_func, kwargs)\n  File \"/home/runner/.local/lib/python3.12/site-packages/anyio/_backends/_trio.py\", line 953, in run_asyncgen_fixture\n    self._call_in_runner_task(asyncgen.asend, None)\n  File \"/home/runner/.local/lib/python3.12/site-packages/anyio/_backends/_trio.py\", line 940, in _call_in_runner_task\n    return outcome_holder[0].unwrap()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/outcome/_impl.py\", line 213, in unwrap\n    raise captured_error\n  File \"/home/runner/.local/lib/python3.12/site-packages/anyio/_backends/_trio.py\", line 910, in _run_tests_and_fixtures\n    retval = await coro\n             ^^^^^^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/golioth/pytest_plugin.py\", line 68, in device\n    await project.delete_device(device)\n  File \"/home/runner/.local/lib/python3.12/site-packages/golioth/golioth.py\", line 257, in delete_device\n    await self.delete_device_by_id(dev.id)\n  File \"/home/runner/.local/lib/python3.12/site-packages/golioth/golioth.py\", line 254, in delete_device_by_id\n    await self.delete(f'devices/{id}')\n  File \"/home/runner/.local/lib/python3.12/site-packages/golioth/golioth.py\", line 83, in wrapper\n    resp.raise_for_status()\n  File \"/home/runner/.local/lib/python3.12/site-packages/httpx/_models.py\", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"board::0","time":{"start":1736870862308,"stop":1736870862311,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1736870862311,"stop":1736870862311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"linux"},{"name":"tag","value":"linux"},{"name":"parentSuite","value":"hil.linux.linux"},{"name":"tag"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_rpc"},{"name":"host","value":"fv-az1047-820"},{"name":"thread","value":"3702-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.rpc.test_rpc"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'linux'"},{"name":"platform_name","value":"'linux'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":4,"skipped":0,"passed":73,"unknown":0,"total":77},"items":[{"uid":"bddc6e44c561cff8","reportUrl":"https://golioth.github.io/allure-reports/recurring/71//#testresult/bddc6e44c561cff8","status":"passed","time":{"start":1736856530610,"stop":1736856546929,"duration":16319}},{"uid":"664ce5a11c0b52c0","reportUrl":"https://golioth.github.io/allure-reports/recurring/70//#testresult/664ce5a11c0b52c0","status":"passed","time":{"start":1736842063413,"stop":1736842079972,"duration":16559}},{"uid":"a719e3ddd3c9297b","reportUrl":"https://golioth.github.io/allure-reports/recurring/69//#testresult/a719e3ddd3c9297b","status":"passed","time":{"start":1736827610694,"stop":1736827627292,"duration":16598}},{"uid":"d1762841b95833a1","reportUrl":"https://golioth.github.io/allure-reports/recurring/67//#testresult/d1762841b95833a1","status":"passed","time":{"start":1736798761088,"stop":1736798777627,"duration":16539}},{"uid":"6a4a4ed5cae02b01","reportUrl":"https://golioth.github.io/allure-reports/recurring/66//#testresult/6a4a4ed5cae02b01","status":"passed","time":{"start":1736784424169,"stop":1736784440982,"duration":16813}},{"uid":"8664e3f659fad039","reportUrl":"https://golioth.github.io/allure-reports/recurring/65//#testresult/8664e3f659fad039","status":"passed","time":{"start":1736770189980,"stop":1736770206798,"duration":16818}},{"uid":"6ab3984c53db1f9f","reportUrl":"https://golioth.github.io/allure-reports/recurring/64//#testresult/6ab3984c53db1f9f","status":"passed","time":{"start":1736755703045,"stop":1736755719596,"duration":16551}},{"uid":"8e277e62238854ed","reportUrl":"https://golioth.github.io/allure-reports/recurring/63//#testresult/8e277e62238854ed","status":"passed","time":{"start":1736741240883,"stop":1736741257692,"duration":16809}},{"uid":"369a98cbd28f71e2","reportUrl":"https://golioth.github.io/allure-reports/recurring/62//#testresult/369a98cbd28f71e2","status":"passed","time":{"start":1736727815564,"stop":1736727832180,"duration":16616}},{"uid":"8b38849013ea61d0","reportUrl":"https://golioth.github.io/allure-reports/recurring/61//#testresult/8b38849013ea61d0","status":"passed","time":{"start":1736712367685,"stop":1736712384507,"duration":16822}},{"uid":"84b78d4442b1c49d","reportUrl":"https://golioth.github.io/allure-reports/recurring/60//#testresult/84b78d4442b1c49d","status":"passed","time":{"start":1736697956237,"stop":1736697972524,"duration":16287}},{"uid":"cb817c51c3e33812","reportUrl":"https://golioth.github.io/allure-reports/recurring/59//#testresult/cb817c51c3e33812","status":"passed","time":{"start":1736683695762,"stop":1736683712571,"duration":16809}},{"uid":"1e74e83bcc68764f","reportUrl":"https://golioth.github.io/allure-reports/recurring/58//#testresult/1e74e83bcc68764f","status":"passed","time":{"start":1736669221955,"stop":1736669238498,"duration":16543}},{"uid":"e90a07084d761d8c","reportUrl":"https://golioth.github.io/allure-reports/recurring/57//#testresult/e90a07084d761d8c","status":"passed","time":{"start":1736654814561,"stop":1736654831421,"duration":16860}},{"uid":"17b07b69f801bba9","reportUrl":"https://golioth.github.io/allure-reports/recurring/56//#testresult/17b07b69f801bba9","status":"passed","time":{"start":1736641429172,"stop":1736641446050,"duration":16878}},{"uid":"a10a502d18c4bcd3","reportUrl":"https://golioth.github.io/allure-reports/recurring/55//#testresult/a10a502d18c4bcd3","status":"passed","time":{"start":1736625979649,"stop":1736625996214,"duration":16565}},{"uid":"63530d9e854910e9","reportUrl":"https://golioth.github.io/allure-reports/recurring/54//#testresult/63530d9e854910e9","status":"passed","time":{"start":1736611558948,"stop":1736611575513,"duration":16565}},{"uid":"aac3ac79f2278d9f","reportUrl":"https://golioth.github.io/allure-reports/recurring/53//#testresult/aac3ac79f2278d9f","status":"passed","time":{"start":1736597296225,"stop":1736597313037,"duration":16812}},{"uid":"dea9edfb7ef29d2","reportUrl":"https://golioth.github.io/allure-reports/recurring/52//#testresult/dea9edfb7ef29d2","status":"passed","time":{"start":1736582845378,"stop":1736582862013,"duration":16635}},{"uid":"f2ec8a89f211fe6d","reportUrl":"https://golioth.github.io/allure-reports/recurring/51//#testresult/f2ec8a89f211fe6d","status":"passed","time":{"start":1736568413947,"stop":1736568430766,"duration":16819}}]},"tags":["linux","anyio","@pytest.mark.usefixtures('anyio_backend')"]},"source":"30d22181e475f40d.json","parameterValues":["'linux'","'linux'"]}