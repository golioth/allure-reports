{"uid":"ae197145ef5462bb","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"efe21cbbb5934f0489b65e4b580675bb","time":{"start":1729817163756,"stop":1729817178495,"duration":14739},"status":"failed","statusMessage":"AssertionError: assert 1 == 0\n +  where 1 = int('1')","statusTrace":"board = <rak5010.RAK5010 object at 0xffffa1a26750>\ndevice = <golioth.golioth.Device object at 0xffffa1915110>\nproject = <golioth.golioth.Project object at 0xffffa2fb9510>\nreleases = {'test_blocks': Release <671aea34990e7ed8707dfd75, release_tags=[], device_tags=['671aea32990e7ed8707dfd72'], artifact..., release_tags=[], device_tags=['671aea32990e7ed8707dfd72'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 1 == 0\nE            +  where 1 = int('1')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1729817088969,"stop":1729817088969,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1729817088970,"stop":1729817088970,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1729817088971,"stop":1729817088971,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1729817088972,"stop":1729817088972,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1729817088972,"stop":1729817088972,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1729817088973,"stop":1729817088973,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1729817088974,"stop":1729817088974,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1729817088974,"stop":1729817088974,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1729817088975,"stop":1729817088975,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1729817088975,"stop":1729817088975,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1729817088976,"stop":1729817088976,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1729817088976,"stop":1729817088976,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1729817088977,"stop":1729817107973,"duration":18996},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1729817107974,"stop":1729817108595,"duration":621},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1729817108596,"stop":1729817109585,"duration":989},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1729817109586,"stop":1729817137783,"duration":28197},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1729817137785,"stop":1729817138381,"duration":596},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1729817138382,"stop":1729817139465,"duration":1083},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1729817139466,"stop":1729817141325,"duration":1859},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1729817163753,"stop":1729817163753,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 1 == 0\n +  where 1 = int('1')","statusTrace":"board = <rak5010.RAK5010 object at 0xffffa1a26750>\ndevice = <golioth.golioth.Device object at 0xffffa1915110>\nproject = <golioth.golioth.Project object at 0xffffa2fb9510>\nreleases = {'test_blocks': Release <671aea34990e7ed8707dfd75, release_tags=[], device_tags=['671aea32990e7ed8707dfd72'], artifact..., release_tags=[], device_tags=['671aea32990e7ed8707dfd72'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 1 == 0\nE            +  where 1 = int('1')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"1b7f765a0a2d0ebd","name":"stdout","source":"1b7f765a0a2d0ebd.txt","type":"text/plain","size":1283}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1729817178655,"stop":1729817180113,"duration":1458},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1729817180115,"stop":1729817181890,"duration":1775},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1729817181892,"stop":1729817182801,"duration":909},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1729817182803,"stop":1729817182803,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1729817182805,"stop":1729817182805,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1729817182807,"stop":1729817183308,"duration":501},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1729817183310,"stop":1729817183310,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1729817183312,"stop":1729817183343,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"rak5010"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.rak5010"},{"name":"tag","value":"mikes_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"f26317fb9b68"},{"name":"thread","value":"258-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'rak5010'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":19,"unknown":0,"total":22},"items":[{"uid":"202c8c7662d806ce","reportUrl":"https://golioth.github.io/allure-reports/main/1695//#testresult/202c8c7662d806ce","status":"passed","time":{"start":1729730619427,"stop":1729730702210,"duration":82783}},{"uid":"e5159191efb40368","reportUrl":"https://golioth.github.io/allure-reports/main/1689//#testresult/e5159191efb40368","status":"passed","time":{"start":1729644331395,"stop":1729644415317,"duration":83922}},{"uid":"b3fb4da9d4e45f35","reportUrl":"https://golioth.github.io/allure-reports/main/1688//#testresult/b3fb4da9d4e45f35","status":"passed","time":{"start":1729557938904,"stop":1729558021403,"duration":82499}},{"uid":"3c079abc5c60308e","reportUrl":"https://golioth.github.io/allure-reports/main/1684//#testresult/3c079abc5c60308e","status":"passed","time":{"start":1729471560669,"stop":1729471643264,"duration":82595}},{"uid":"8dbeb5b93810bac7","reportUrl":"https://golioth.github.io/allure-reports/main/1683//#testresult/8dbeb5b93810bac7","status":"passed","time":{"start":1729385270598,"stop":1729385353673,"duration":83075}},{"uid":"1e82dba81d3c6d20","reportUrl":"https://golioth.github.io/allure-reports/main/1//#testresult/1e82dba81d3c6d20","status":"passed","time":{"start":1729369202789,"stop":1729369285958,"duration":83169}},{"uid":"e94d83f85312be94","reportUrl":"https://golioth.github.io/allure-reports/main/1//#testresult/e94d83f85312be94","status":"failed","statusDetails":"AssertionError: assert 1 == 5\n +  where 1 = len({'multi_artifact': Artifact <65f896d09b3bc69827b4cb21, package=walrus, version=0.4.2, blueprint=None>})","time":{"start":1729361984317,"stop":1729361984317,"duration":0}},{"uid":"b53ffb09d3962d4e","reportUrl":"https://golioth.github.io/allure-reports/main/1676//#testresult/b53ffb09d3962d4e","status":"passed","time":{"start":1729298685538,"stop":1729298768859,"duration":83321}},{"uid":"6d230b8e481e6d79","reportUrl":"https://golioth.github.io/allure-reports/main/1675//#testresult/6d230b8e481e6d79","status":"passed","time":{"start":1729212289809,"stop":1729212373400,"duration":83591}},{"uid":"2787f64da1923d5d","reportUrl":"https://golioth.github.io/allure-reports/main/1674//#testresult/2787f64da1923d5d","status":"passed","time":{"start":1729203371856,"stop":1729203455605,"duration":83749}},{"uid":"11570190c443ec52","reportUrl":"https://golioth.github.io/allure-reports/main/1659//#testresult/11570190c443ec52","status":"passed","time":{"start":1729129217110,"stop":1729129300606,"duration":83496}},{"uid":"5778c43c9cc4d7f3","reportUrl":"https://golioth.github.io/allure-reports/main/1649//#testresult/5778c43c9cc4d7f3","status":"passed","time":{"start":1729110065299,"stop":1729110148671,"duration":83372}},{"uid":"a35067733c88975f","reportUrl":"https://golioth.github.io/allure-reports/main/1647//#testresult/a35067733c88975f","status":"passed","time":{"start":1729038833176,"stop":1729038915971,"duration":82795}},{"uid":"63d5ba217b985636","reportUrl":"https://golioth.github.io/allure-reports/main/1643//#testresult/63d5ba217b985636","status":"passed","time":{"start":1729026226017,"stop":1729026308480,"duration":82463}},{"uid":"91a69e55acc3ef94","reportUrl":"https://golioth.github.io/allure-reports/main/1639//#testresult/91a69e55acc3ef94","status":"passed","time":{"start":1729008293383,"stop":1729008375964,"duration":82581}},{"uid":"11e772e3cf804782","reportUrl":"https://golioth.github.io/allure-reports/main/1637//#testresult/11e772e3cf804782","status":"passed","time":{"start":1728953129746,"stop":1728953221257,"duration":91511}},{"uid":"e6d627c2dfe0ad50","reportUrl":"https://golioth.github.io/allure-reports/main/1636//#testresult/e6d627c2dfe0ad50","status":"passed","time":{"start":1728866805181,"stop":1728866887484,"duration":82303}},{"uid":"3b8e59c7d1e7e2ab","reportUrl":"https://golioth.github.io/allure-reports/main/1635//#testresult/3b8e59c7d1e7e2ab","status":"passed","time":{"start":1728780350136,"stop":1728780432775,"duration":82639}},{"uid":"1a4a01140886e821","reportUrl":"https://golioth.github.io/allure-reports/main/1634//#testresult/1a4a01140886e821","status":"passed","time":{"start":1728693203735,"stop":1728693286287,"duration":82552}},{"uid":"fb1f1a9c485ab46e","reportUrl":"https://golioth.github.io/allure-reports/main/1633//#testresult/fb1f1a9c485ab46e","status":"passed","time":{"start":1728668441353,"stop":1728668523577,"duration":82224}}]},"tags":["mikes_orange_pi","anyio","@pytest.mark.usefixtures('anyio_backend')","rak5010","zephyr"]},"source":"ae197145ef5462bb.json","parameterValues":["'rak5010'","'zephyr'"]}