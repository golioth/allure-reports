{"uid":"b97e892ccd7bc96f","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"805922d6f8e486f2169951f916b7199e","time":{"start":1729471517061,"stop":1729471551556,"duration":34495},"status":"failed","statusMessage":"AssertionError: assert 4 == 3\n +  where 4 = int('4')","statusTrace":"board = <mimxrt1024evk.MIMXRT1024EVK object at 0xffff9f7b5010>\ndevice = <golioth.golioth.Device object at 0xffff9f796350>\nproject = <golioth.golioth.Project object at 0xffff9f6da690>\nreleases = {'test_blocks': Release <6715a414bcef059578ecda3a, release_tags=[], device_tags=['6715a412bcef059578ecda37'], artifact..., release_tags=[], device_tags=['6715a412bcef059578ecda37'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 4 == 3\nE            +  where 4 = int('4')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1729471477262,"stop":1729471477263,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1729471477264,"stop":1729471477264,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1729471477265,"stop":1729471477266,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1729471477265,"stop":1729471477265,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1729471477266,"stop":1729471477267,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1729471477267,"stop":1729471477268,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1729471477268,"stop":1729471477268,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1729471477269,"stop":1729471477269,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1729471477269,"stop":1729471477270,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1729471477270,"stop":1729471477270,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1729471477271,"stop":1729471477271,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1729471477271,"stop":1729471477272,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1729471477272,"stop":1729471497625,"duration":20353},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1729471497627,"stop":1729471498248,"duration":621},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1729471498248,"stop":1729471499448,"duration":1200},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1729471499449,"stop":1729471505697,"duration":6248},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1729471505699,"stop":1729471506172,"duration":473},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1729471506173,"stop":1729471507086,"duration":913},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1729471507086,"stop":1729471509008,"duration":1922},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1729471517058,"stop":1729471517059,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 4 == 3\n +  where 4 = int('4')","statusTrace":"board = <mimxrt1024evk.MIMXRT1024EVK object at 0xffff9f7b5010>\ndevice = <golioth.golioth.Device object at 0xffff9f796350>\nproject = <golioth.golioth.Project object at 0xffff9f6da690>\nreleases = {'test_blocks': Release <6715a414bcef059578ecda3a, release_tags=[], device_tags=['6715a412bcef059578ecda37'], artifact..., release_tags=[], device_tags=['6715a412bcef059578ecda37'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 4 == 3\nE            +  where 4 = int('4')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"793b2fca6c6a6412","name":"stdout","source":"793b2fca6c6a6412.txt","type":"text/plain","size":2284}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1729471551740,"stop":1729471553082,"duration":1342},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1729471553084,"stop":1729471555017,"duration":1933},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1729471555019,"stop":1729471555868,"duration":849},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1729471555870,"stop":1729471555870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1729471555872,"stop":1729471555872,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1729471555874,"stop":1729471556425,"duration":551},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1729471556427,"stop":1729471556428,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1729471556429,"stop":1729471556487,"duration":58},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"mimxrt1024_evk"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.mimxrt1024_evk"},{"name":"tag","value":"sams_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"92271cbf9e76"},{"name":"thread","value":"280-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'mimxrt1024_evk'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":1,"skipped":0,"passed":13,"unknown":0,"total":16},"items":[{"uid":"ba9f0dcb81bb34aa","reportUrl":"https://golioth.github.io/allure-reports/main/1683//#testresult/ba9f0dcb81bb34aa","status":"passed","time":{"start":1729385276210,"stop":1729385353664,"duration":77454}},{"uid":"b5970dcb852f4f9f","reportUrl":"https://golioth.github.io/allure-reports/main/1//#testresult/b5970dcb852f4f9f","status":"passed","time":{"start":1729369131769,"stop":1729369209991,"duration":78222}},{"uid":"bde9207985d6dff5","reportUrl":"https://golioth.github.io/allure-reports/main/1//#testresult/bde9207985d6dff5","status":"failed","statusDetails":"AssertionError: assert 1 == 5\n +  where 1 = len({'multi_artifact': Artifact <65f896d09b3bc69827b4cb21, package=walrus, version=0.4.2, blueprint=None>})","time":{"start":1729361937902,"stop":1729361937902,"duration":0}},{"uid":"1d61c59ebeef031a","reportUrl":"https://golioth.github.io/allure-reports/main/1676//#testresult/1d61c59ebeef031a","status":"passed","time":{"start":1729298707706,"stop":1729298785846,"duration":78140}},{"uid":"c1a4f32d0e839baf","reportUrl":"https://golioth.github.io/allure-reports/main/1675//#testresult/c1a4f32d0e839baf","status":"passed","time":{"start":1729212232501,"stop":1729212311839,"duration":79338}},{"uid":"555279a0244efa1e","reportUrl":"https://golioth.github.io/allure-reports/main/1659//#testresult/555279a0244efa1e","status":"passed","time":{"start":1729129746808,"stop":1729129823963,"duration":77155}},{"uid":"a66b3298a8e31213","reportUrl":"https://golioth.github.io/allure-reports/main/1649//#testresult/a66b3298a8e31213","status":"passed","time":{"start":1729109918221,"stop":1729109995911,"duration":77690}},{"uid":"5e33e50855478d9f","reportUrl":"https://golioth.github.io/allure-reports/main/1647//#testresult/5e33e50855478d9f","status":"passed","time":{"start":1729039395601,"stop":1729039472617,"duration":77016}},{"uid":"ad993af35c84f13f","reportUrl":"https://golioth.github.io/allure-reports/main/1643//#testresult/ad993af35c84f13f","status":"passed","time":{"start":1729025621323,"stop":1729025699637,"duration":78314}},{"uid":"81f6c4753ced60fa","reportUrl":"https://golioth.github.io/allure-reports/main/1639//#testresult/81f6c4753ced60fa","status":"passed","time":{"start":1729007718884,"stop":1729007796256,"duration":77372}},{"uid":"77f107f63d05dee5","reportUrl":"https://golioth.github.io/allure-reports/main/1636//#testresult/77f107f63d05dee5","status":"passed","time":{"start":1728866830234,"stop":1728866907467,"duration":77233}},{"uid":"db851cbd873fce19","reportUrl":"https://golioth.github.io/allure-reports/main/1635//#testresult/db851cbd873fce19","status":"passed","time":{"start":1728780387796,"stop":1728780465504,"duration":77708}},{"uid":"4828096a4aeabc79","reportUrl":"https://golioth.github.io/allure-reports/main/1634//#testresult/4828096a4aeabc79","status":"passed","time":{"start":1728693732339,"stop":1728693809542,"duration":77203}},{"uid":"faa681c99ca431e9","reportUrl":"https://golioth.github.io/allure-reports/main/1633//#testresult/faa681c99ca431e9","status":"passed","time":{"start":1728668527299,"stop":1728668604749,"duration":77450}},{"uid":"46ae1f9a0103c265","reportUrl":"https://golioth.github.io/allure-reports/main/1631//#testresult/46ae1f9a0103c265","status":"broken","statusDetails":"httpx.ConnectTimeout","time":{"start":1728662913699,"stop":1728662913699,"duration":0}}]},"tags":["anyio","sams_orange_pi","@pytest.mark.usefixtures('anyio_backend')","mimxrt1024_evk","zephyr"]},"source":"b97e892ccd7bc96f.json","parameterValues":["'mimxrt1024_evk'","'zephyr'"]}