{"uid":"dc8f889f3473aa12","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"efe21cbbb5934f0489b65e4b580675bb","time":{"start":1731285941822,"stop":1731285985286,"duration":43464},"status":"failed","statusMessage":"AssertionError: assert 5 == 4\n +  where 5 = int('5')","statusTrace":"board = <rak5010.RAK5010 object at 0xffffa74a7310>\ndevice = <golioth.golioth.Device object at 0xffffa7427550>\nproject = <golioth.golioth.Project object at 0xffffa73ea690>\nreleases = {'test_blocks': Release <673153a456be7a2f90e96d61, release_tags=[], device_tags=['673153a256be7a2f90e96d5e'], artifact..., release_tags=[], device_tags=['673153a256be7a2f90e96d5e'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 5 == 4\nE            +  where 5 = int('5')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1731285867416,"stop":1731285867416,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1731285867417,"stop":1731285867418,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1731285867417,"stop":1731285867417,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1731285867418,"stop":1731285867418,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1731285867419,"stop":1731285867419,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1731285867420,"stop":1731285867420,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1731285867421,"stop":1731285867421,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1731285867421,"stop":1731285867421,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1731285867422,"stop":1731285867422,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1731285867422,"stop":1731285867422,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1731285867423,"stop":1731285867423,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1731285867423,"stop":1731285867423,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1731285867424,"stop":1731285886459,"duration":19035},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1731285886461,"stop":1731285886959,"duration":498},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1731285886959,"stop":1731285887799,"duration":840},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1731285887799,"stop":1731285921592,"duration":33793},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1731285921594,"stop":1731285922136,"duration":542},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1731285922137,"stop":1731285922968,"duration":831},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1731285922968,"stop":1731285924532,"duration":1564},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1731285941819,"stop":1731285941820,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 5 == 4\n +  where 5 = int('5')","statusTrace":"board = <rak5010.RAK5010 object at 0xffffa74a7310>\ndevice = <golioth.golioth.Device object at 0xffffa7427550>\nproject = <golioth.golioth.Project object at 0xffffa73ea690>\nreleases = {'test_blocks': Release <673153a456be7a2f90e96d61, release_tags=[], device_tags=['673153a256be7a2f90e96d5e'], artifact..., release_tags=[], device_tags=['673153a256be7a2f90e96d5e'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 5 == 4\nE            +  where 5 = int('5')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"5ad572bc0fed29f7","name":"stdout","source":"5ad572bc0fed29f7.txt","type":"text/plain","size":2620}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1731285985420,"stop":1731285986370,"duration":950},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1731285986372,"stop":1731285987831,"duration":1459},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1731285987833,"stop":1731285988642,"duration":809},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1731285988645,"stop":1731285988645,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1731285988647,"stop":1731285988647,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1731285988649,"stop":1731285989066,"duration":417},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1731285989068,"stop":1731285989069,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1731285989070,"stop":1731285989092,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"rak5010"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.rak5010"},{"name":"tag","value":"mikes_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"1a96bcea7b44"},{"name":"thread","value":"258-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'rak5010'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":6,"broken":0,"skipped":0,"passed":35,"unknown":0,"total":41},"items":[{"uid":"371a28ff68fe0a8d","reportUrl":"https://golioth.github.io/allure-reports/main/1722//#testresult/371a28ff68fe0a8d","status":"passed","time":{"start":1731199561394,"stop":1731199644879,"duration":83485}},{"uid":"165dd8d5164bec75","reportUrl":"https://golioth.github.io/allure-reports/main/1721//#testresult/165dd8d5164bec75","status":"passed","time":{"start":1731113002438,"stop":1731113085602,"duration":83164}},{"uid":"d0795de01ee9c12e","reportUrl":"https://golioth.github.io/allure-reports/main/1718//#testresult/d0795de01ee9c12e","status":"passed","time":{"start":1731026640465,"stop":1731026722720,"duration":82255}},{"uid":"4ede673de1e93a67","reportUrl":"https://golioth.github.io/allure-reports/main/1717//#testresult/4ede673de1e93a67","status":"passed","time":{"start":1730940220398,"stop":1730940303813,"duration":83415}},{"uid":"3a84128629e9b0c1","reportUrl":"https://golioth.github.io/allure-reports/main/1716//#testresult/3a84128629e9b0c1","status":"passed","time":{"start":1730894731684,"stop":1730894813726,"duration":82042}},{"uid":"44ce4609c1f8d381","reportUrl":"https://golioth.github.io/allure-reports/main/1716//#testresult/44ce4609c1f8d381","status":"passed","time":{"start":1730853866714,"stop":1730853948521,"duration":81807}},{"uid":"d42dbcdead6edf4","reportUrl":"https://golioth.github.io/allure-reports/main/1715//#testresult/d42dbcdead6edf4","status":"passed","time":{"start":1730767461641,"stop":1730767543519,"duration":81878}},{"uid":"98c1555d513f78e7","reportUrl":"https://golioth.github.io/allure-reports/main/1714//#testresult/98c1555d513f78e7","status":"passed","time":{"start":1730681130687,"stop":1730681213486,"duration":82799}},{"uid":"fc570782e309fcbe","reportUrl":"https://golioth.github.io/allure-reports/main/1713//#testresult/fc570782e309fcbe","status":"passed","time":{"start":1730594782940,"stop":1730594867523,"duration":84583}},{"uid":"3b58d1143d5f840e","reportUrl":"https://golioth.github.io/allure-reports/main/1711//#testresult/3b58d1143d5f840e","status":"passed","time":{"start":1730507627871,"stop":1730507710843,"duration":82972}},{"uid":"4ec5411958400c16","reportUrl":"https://golioth.github.io/allure-reports/main/1709//#testresult/4ec5411958400c16","status":"passed","time":{"start":1730421407718,"stop":1730421492160,"duration":84442}},{"uid":"ee75c25e8cfcd426","reportUrl":"https://golioth.github.io/allure-reports/main/1705//#testresult/ee75c25e8cfcd426","status":"passed","time":{"start":1730335615399,"stop":1730335698218,"duration":82819}},{"uid":"42f7379ca56226d0","reportUrl":"https://golioth.github.io/allure-reports/main/1704//#testresult/42f7379ca56226d0","status":"failed","statusDetails":"AssertionError: assert 2 == 1\n +  where 2 = int('2')","time":{"start":1730303919641,"stop":1730303940343,"duration":20702}},{"uid":"39ccf5596491f9d9","reportUrl":"https://golioth.github.io/allure-reports/main/1703//#testresult/39ccf5596491f9d9","status":"passed","time":{"start":1730249038820,"stop":1730249121489,"duration":82669}},{"uid":"6f3934c271d2754e","reportUrl":"https://golioth.github.io/allure-reports/main/1701//#testresult/6f3934c271d2754e","status":"failed","statusDetails":"AssertionError: assert 6 == 5\n +  where 6 = int('6')","time":{"start":1730162758219,"stop":1730162809583,"duration":51364}},{"uid":"ef522c5542b7b4d","reportUrl":"https://golioth.github.io/allure-reports/main/1700//#testresult/ef522c5542b7b4d","status":"passed","time":{"start":1730076457465,"stop":1730076540441,"duration":82976}},{"uid":"8b40c73c15425e25","reportUrl":"https://golioth.github.io/allure-reports/main/1699//#testresult/8b40c73c15425e25","status":"passed","time":{"start":1729990090824,"stop":1729990173731,"duration":82907}},{"uid":"915a689fd0d0ef81","reportUrl":"https://golioth.github.io/allure-reports/main/1698//#testresult/915a689fd0d0ef81","status":"passed","time":{"start":1729903510569,"stop":1729903592678,"duration":82109}},{"uid":"ae197145ef5462bb","reportUrl":"https://golioth.github.io/allure-reports/main/1697//#testresult/ae197145ef5462bb","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = int('1')","time":{"start":1729817163756,"stop":1729817178495,"duration":14739}},{"uid":"202c8c7662d806ce","reportUrl":"https://golioth.github.io/allure-reports/main/1695//#testresult/202c8c7662d806ce","status":"passed","time":{"start":1729730619427,"stop":1729730702210,"duration":82783}}]},"tags":["mikes_orange_pi","anyio","@pytest.mark.usefixtures('anyio_backend')","rak5010","zephyr"]},"source":"dc8f889f3473aa12.json","parameterValues":["'rak5010'","'zephyr'"]}