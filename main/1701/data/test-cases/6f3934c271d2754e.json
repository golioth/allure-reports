{"uid":"6f3934c271d2754e","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"efe21cbbb5934f0489b65e4b580675bb","time":{"start":1730162758219,"stop":1730162809583,"duration":51364},"status":"failed","statusMessage":"AssertionError: assert 6 == 5\n +  where 6 = int('6')","statusTrace":"board = <rak5010.RAK5010 object at 0xffff94b95fd0>\ndevice = <golioth.golioth.Device object at 0xffff94af6990>\nproject = <golioth.golioth.Project object at 0xffff94b96ad0>\nreleases = {'test_blocks': Release <67203033990e7ed8707e1d3d, release_tags=[], device_tags=['67203031990e7ed8707e1d3a'], artifact..., release_tags=[], device_tags=['67203031990e7ed8707e1d3a'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 6 == 5\nE            +  where 6 = int('6')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1730162664606,"stop":1730162664607,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1730162664608,"stop":1730162664608,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1730162664609,"stop":1730162664609,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1730162664610,"stop":1730162664611,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1730162664612,"stop":1730162664612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1730162664613,"stop":1730162664613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1730162664614,"stop":1730162664614,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1730162664615,"stop":1730162664615,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1730162664616,"stop":1730162664616,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1730162664617,"stop":1730162664617,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1730162664618,"stop":1730162664618,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1730162664619,"stop":1730162664619,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1730162664620,"stop":1730162705700,"duration":41080},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1730162705702,"stop":1730162706238,"duration":536},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1730162706238,"stop":1730162707238,"duration":1000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1730162707238,"stop":1730162736359,"duration":29121},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1730162736360,"stop":1730162736804,"duration":444},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1730162736804,"stop":1730162737862,"duration":1058},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1730162737863,"stop":1730162739899,"duration":2036},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1730162758216,"stop":1730162758216,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 6 == 5\n +  where 6 = int('6')","statusTrace":"board = <rak5010.RAK5010 object at 0xffff94b95fd0>\ndevice = <golioth.golioth.Device object at 0xffff94af6990>\nproject = <golioth.golioth.Project object at 0xffff94b96ad0>\nreleases = {'test_blocks': Release <67203033990e7ed8707e1d3d, release_tags=[], device_tags=['67203031990e7ed8707e1d3a'], artifact..., release_tags=[], device_tags=['67203031990e7ed8707e1d3a'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 6 == 5\nE            +  where 6 = int('6')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"ed892953613ef4ee","name":"stdout","source":"ed892953613ef4ee.txt","type":"text/plain","size":2841}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1730162809727,"stop":1730162811001,"duration":1274},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1730162811004,"stop":1730162812849,"duration":1845},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1730162812851,"stop":1730162813848,"duration":997},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1730162813850,"stop":1730162813850,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1730162813851,"stop":1730162813852,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1730162813854,"stop":1730162814386,"duration":532},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1730162814388,"stop":1730162814388,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1730162814390,"stop":1730162814394,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"rak5010"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.rak5010"},{"name":"tag","value":"mikes_testbench"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"391b4726f591"},{"name":"thread","value":"253-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'rak5010'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":22,"unknown":0,"total":26},"items":[{"uid":"ef522c5542b7b4d","reportUrl":"https://golioth.github.io/allure-reports/main/1700//#testresult/ef522c5542b7b4d","status":"passed","time":{"start":1730076457465,"stop":1730076540441,"duration":82976}},{"uid":"8b40c73c15425e25","reportUrl":"https://golioth.github.io/allure-reports/main/1699//#testresult/8b40c73c15425e25","status":"passed","time":{"start":1729990090824,"stop":1729990173731,"duration":82907}},{"uid":"915a689fd0d0ef81","reportUrl":"https://golioth.github.io/allure-reports/main/1698//#testresult/915a689fd0d0ef81","status":"passed","time":{"start":1729903510569,"stop":1729903592678,"duration":82109}},{"uid":"ae197145ef5462bb","reportUrl":"https://golioth.github.io/allure-reports/main/1697//#testresult/ae197145ef5462bb","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = int('1')","time":{"start":1729817163756,"stop":1729817178495,"duration":14739}},{"uid":"202c8c7662d806ce","reportUrl":"https://golioth.github.io/allure-reports/main/1695//#testresult/202c8c7662d806ce","status":"passed","time":{"start":1729730619427,"stop":1729730702210,"duration":82783}},{"uid":"e5159191efb40368","reportUrl":"https://golioth.github.io/allure-reports/main/1689//#testresult/e5159191efb40368","status":"passed","time":{"start":1729644331395,"stop":1729644415317,"duration":83922}},{"uid":"b3fb4da9d4e45f35","reportUrl":"https://golioth.github.io/allure-reports/main/1688//#testresult/b3fb4da9d4e45f35","status":"passed","time":{"start":1729557938904,"stop":1729558021403,"duration":82499}},{"uid":"3c079abc5c60308e","reportUrl":"https://golioth.github.io/allure-reports/main/1684//#testresult/3c079abc5c60308e","status":"passed","time":{"start":1729471560669,"stop":1729471643264,"duration":82595}},{"uid":"8dbeb5b93810bac7","reportUrl":"https://golioth.github.io/allure-reports/main/1683//#testresult/8dbeb5b93810bac7","status":"passed","time":{"start":1729385270598,"stop":1729385353673,"duration":83075}},{"uid":"1e82dba81d3c6d20","reportUrl":"https://golioth.github.io/allure-reports/main/1//#testresult/1e82dba81d3c6d20","status":"passed","time":{"start":1729369202789,"stop":1729369285958,"duration":83169}},{"uid":"e94d83f85312be94","reportUrl":"https://golioth.github.io/allure-reports/main/1//#testresult/e94d83f85312be94","status":"failed","statusDetails":"AssertionError: assert 1 == 5\n +  where 1 = len({'multi_artifact': Artifact <65f896d09b3bc69827b4cb21, package=walrus, version=0.4.2, blueprint=None>})","time":{"start":1729361984317,"stop":1729361984317,"duration":0}},{"uid":"b53ffb09d3962d4e","reportUrl":"https://golioth.github.io/allure-reports/main/1676//#testresult/b53ffb09d3962d4e","status":"passed","time":{"start":1729298685538,"stop":1729298768859,"duration":83321}},{"uid":"6d230b8e481e6d79","reportUrl":"https://golioth.github.io/allure-reports/main/1675//#testresult/6d230b8e481e6d79","status":"passed","time":{"start":1729212289809,"stop":1729212373400,"duration":83591}},{"uid":"2787f64da1923d5d","reportUrl":"https://golioth.github.io/allure-reports/main/1674//#testresult/2787f64da1923d5d","status":"passed","time":{"start":1729203371856,"stop":1729203455605,"duration":83749}},{"uid":"11570190c443ec52","reportUrl":"https://golioth.github.io/allure-reports/main/1659//#testresult/11570190c443ec52","status":"passed","time":{"start":1729129217110,"stop":1729129300606,"duration":83496}},{"uid":"5778c43c9cc4d7f3","reportUrl":"https://golioth.github.io/allure-reports/main/1649//#testresult/5778c43c9cc4d7f3","status":"passed","time":{"start":1729110065299,"stop":1729110148671,"duration":83372}},{"uid":"a35067733c88975f","reportUrl":"https://golioth.github.io/allure-reports/main/1647//#testresult/a35067733c88975f","status":"passed","time":{"start":1729038833176,"stop":1729038915971,"duration":82795}},{"uid":"63d5ba217b985636","reportUrl":"https://golioth.github.io/allure-reports/main/1643//#testresult/63d5ba217b985636","status":"passed","time":{"start":1729026226017,"stop":1729026308480,"duration":82463}},{"uid":"91a69e55acc3ef94","reportUrl":"https://golioth.github.io/allure-reports/main/1639//#testresult/91a69e55acc3ef94","status":"passed","time":{"start":1729008293383,"stop":1729008375964,"duration":82581}},{"uid":"11e772e3cf804782","reportUrl":"https://golioth.github.io/allure-reports/main/1637//#testresult/11e772e3cf804782","status":"passed","time":{"start":1728953129746,"stop":1728953221257,"duration":91511}}]},"tags":["anyio","mikes_testbench","@pytest.mark.usefixtures('anyio_backend')","rak5010","zephyr"]},"source":"6f3934c271d2754e.json","parameterValues":["'rak5010'","'zephyr'"]}