{
  "uid" : "a74278cbf75a4b54",
  "name" : "test_hello",
  "fullName" : "modules.lib.golioth-firmware-sdk.examples.zephyr.hello.pytest.test_sample#test_hello",
  "historyId" : "e43e30077c8654d0036bc169098990de",
  "time" : {
    "start" : 1733782999849,
    "stop" : 1733783023660,
    "duration" : 23811
  },
  "status" : "failed",
  "statusMessage" : "AssertionError: Unable to find all Hello messages on server\nassert 0 == 3",
  "statusTrace" : "shell = <twister_harness.helpers.shell.Shell object at 0xffffbc2f0590>\ndevice = <golioth.golioth.Device object at 0xffffbc2f3010>\nwifi_ssid = '***TIMS_ORANGE_PI_WIFI_SSID***', wifi_psk = '***TIMS_ORANGE_PI_WIFI_PSK***'\n\n    async def test_hello(shell, device, wifi_ssid, wifi_psk):\n        await trio.sleep(2)\n    \n        # Set Golioth credential\n    \n        golioth_cred = (await device.credentials.list())[0]\n        shell.exec_command(f\"settings set golioth/psk-id {golioth_cred.identity}\")\n        shell.exec_command(f\"settings set golioth/psk {golioth_cred.key}\")\n    \n        # Set WiFi credential\n    \n        if wifi_ssid is not None:\n            shell.exec_command(f\"settings set wifi/ssid \\\"{wifi_ssid}\\\"\")\n    \n        if wifi_psk is not None:\n            shell.exec_command(f\"settings set wifi/psk \\\"{wifi_psk}\\\"\")\n    \n        # Record timestamp and wait for fourth hello message\n    \n        start = datetime.datetime.utcnow()\n        shell._device.readlines_until(regex=\".*Sending hello! 3\", timeout=110.0)\n    \n        # Check logs for hello messages\n    \n        end = datetime.datetime.utcnow()\n    \n        logs = await device.get_logs({'start': start.strftime('%Y-%m-%dT%H:%M:%S.%fZ'), 'end': end.strftime('%Y-%m-%dT%H:%M:%S.%fZ')})\n    \n        # Test logs received from server\n    \n        LOGGER.info(\"Searching log messages from end to start:\")\n        test_idx = 2\n        test_hits = 0\n        for m in reversed(logs):\n    \n            if m.message == f\"Sending hello! {test_idx}\":\n                LOGGER.info(\"### MATCH FOUND! ---> {0}\".format(m.message))\n                test_hits += 1\n                test_idx -= 1\n                if test_idx < 0:\n                    break\n            else:\n                LOGGER.info(m.message)\n    \n>       assert test_hits == 3, 'Unable to find all Hello messages on server'\nE       AssertionError: Unable to find all Hello messages on server\nE       assert 0 == 3\n\nmodules/lib/golioth-firmware-sdk/examples/zephyr/hello/pytest/test_sample.py:54: AssertionError",
  "flaky" : false,
  "newFailed" : true,
  "beforeStages" : [ {
    "name" : "device_name",
    "time" : {
      "start" : 1733782972103,
      "stop" : 1733782972103,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "wifi_ssid",
    "time" : {
      "start" : 1733782972102,
      "stop" : 1733782972102,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "device_object",
    "time" : {
      "start" : 1733782972104,
      "stop" : 1733782972106,
      "duration" : 2
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "anyio_backend",
    "time" : {
      "start" : 1733782972101,
      "stop" : 1733782972102,
      "duration" : 1
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "api_key",
    "time" : {
      "start" : 1733782972107,
      "stop" : 1733782972107,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "project",
    "time" : {
      "start" : 1733782972108,
      "stop" : 1733782972585,
      "duration" : 477
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "api_url",
    "time" : {
      "start" : 1733782972108,
      "stop" : 1733782972108,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "wifi_psk",
    "time" : {
      "start" : 1733782972103,
      "stop" : 1733782972103,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "twister_harness_config",
    "time" : {
      "start" : 1733782972104,
      "stop" : 1733782972104,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "shell",
    "time" : {
      "start" : 1733782996676,
      "stop" : 1733782999842,
      "duration" : 3166
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "device",
    "time" : {
      "start" : 1733782972585,
      "stop" : 1733782973460,
      "duration" : 875
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "dut",
    "time" : {
      "start" : 1733782973461,
      "stop" : 1733782996675,
      "duration" : 23214
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "testStage" : {
    "status" : "failed",
    "statusMessage" : "AssertionError: Unable to find all Hello messages on server\nassert 0 == 3",
    "statusTrace" : "shell = <twister_harness.helpers.shell.Shell object at 0xffffbc2f0590>\ndevice = <golioth.golioth.Device object at 0xffffbc2f3010>\nwifi_ssid = '***TIMS_ORANGE_PI_WIFI_SSID***', wifi_psk = '***TIMS_ORANGE_PI_WIFI_PSK***'\n\n    async def test_hello(shell, device, wifi_ssid, wifi_psk):\n        await trio.sleep(2)\n    \n        # Set Golioth credential\n    \n        golioth_cred = (await device.credentials.list())[0]\n        shell.exec_command(f\"settings set golioth/psk-id {golioth_cred.identity}\")\n        shell.exec_command(f\"settings set golioth/psk {golioth_cred.key}\")\n    \n        # Set WiFi credential\n    \n        if wifi_ssid is not None:\n            shell.exec_command(f\"settings set wifi/ssid \\\"{wifi_ssid}\\\"\")\n    \n        if wifi_psk is not None:\n            shell.exec_command(f\"settings set wifi/psk \\\"{wifi_psk}\\\"\")\n    \n        # Record timestamp and wait for fourth hello message\n    \n        start = datetime.datetime.utcnow()\n        shell._device.readlines_until(regex=\".*Sending hello! 3\", timeout=110.0)\n    \n        # Check logs for hello messages\n    \n        end = datetime.datetime.utcnow()\n    \n        logs = await device.get_logs({'start': start.strftime('%Y-%m-%dT%H:%M:%S.%fZ'), 'end': end.strftime('%Y-%m-%dT%H:%M:%S.%fZ')})\n    \n        # Test logs received from server\n    \n        LOGGER.info(\"Searching log messages from end to start:\")\n        test_idx = 2\n        test_hits = 0\n        for m in reversed(logs):\n    \n            if m.message == f\"Sending hello! {test_idx}\":\n                LOGGER.info(\"### MATCH FOUND! ---> {0}\".format(m.message))\n                test_hits += 1\n                test_idx -= 1\n                if test_idx < 0:\n                    break\n            else:\n                LOGGER.info(m.message)\n    \n>       assert test_hits == 3, 'Unable to find all Hello messages on server'\nE       AssertionError: Unable to find all Hello messages on server\nE       assert 0 == 3\n\nmodules/lib/golioth-firmware-sdk/examples/zephyr/hello/pytest/test_sample.py:54: AssertionError",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "662a57a936146e2d",
      "name" : "log",
      "source" : "662a57a936146e2d.txt",
      "type" : "text/plain",
      "size" : 18523
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 1,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ {
    "name" : "device_object::0",
    "time" : {
      "start" : 1733783024287,
      "stop" : 1733783024287,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "project::0",
    "time" : {
      "start" : 1733783024280,
      "stop" : 1733783024282,
      "duration" : 2
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "device::0",
    "time" : {
      "start" : 1733783023852,
      "stop" : 1733783024278,
      "duration" : 426
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "dut::0",
    "time" : {
      "start" : 1733783023841,
      "stop" : 1733783023851,
      "duration" : 10
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "labels" : [ {
    "name" : "tag",
    "value" : "nrf52840dk"
  }, {
    "name" : "tag",
    "value" : "zephyr"
  }, {
    "name" : "parentSuite",
    "value" : "sample.zephyr.nrf52840dk"
  }, {
    "name" : "tag",
    "value" : "tims_orange_pi"
  }, {
    "name" : "tag",
    "value" : "@pytest.mark.usefixtures('anyio_backend')"
  }, {
    "name" : "tag",
    "value" : "anyio"
  }, {
    "name" : "suite",
    "value" : "test_sample"
  }, {
    "name" : "host",
    "value" : "fb91525e6714"
  }, {
    "name" : "thread",
    "value" : "937-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "package",
    "value" : "modules.lib.golioth-firmware-sdk.examples.zephyr.hello.pytest.test_sample"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ {
    "name" : "board_name",
    "value" : "'nrf52840dk'"
  }, {
    "name" : "platform_name",
    "value" : "'zephyr'"
  } ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ {
      "uid" : "3c2d7568b92025f1",
      "status" : "failed",
      "statusDetails" : "AssertionError: Unable to find all Hello messages on server\nassert 0 == 3",
      "time" : {
        "start" : 1733782944022,
        "stop" : 1733782967786,
        "duration" : 23764
      }
    } ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "history" : {
      "statistic" : {
        "failed" : 4,
        "broken" : 3,
        "skipped" : 0,
        "passed" : 85,
        "unknown" : 0,
        "total" : 92
      },
      "items" : [ {
        "uid" : "2f3ddaf0847374c4",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1877/#testresult/2f3ddaf0847374c4",
        "status" : "passed",
        "time" : {
          "start" : 1733761521131,
          "stop" : 1733761545054,
          "duration" : 23923
        }
      }, {
        "uid" : "10f63062fe0a9b01",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1876/#testresult/10f63062fe0a9b01",
        "status" : "passed",
        "time" : {
          "start" : 1733706564416,
          "stop" : 1733706591216,
          "duration" : 26800
        }
      }, {
        "uid" : "fa51ae59f8ec76c8",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1875/#testresult/fa51ae59f8ec76c8",
        "status" : "passed",
        "time" : {
          "start" : 1733620301857,
          "stop" : 1733620325433,
          "duration" : 23576
        }
      }, {
        "uid" : "2577cd5ceed14d76",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1874/#testresult/2577cd5ceed14d76",
        "status" : "passed",
        "time" : {
          "start" : 1733532906859,
          "stop" : 1733532930622,
          "duration" : 23763
        }
      }, {
        "uid" : "52c6fb818e5a91ee",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1871/#testresult/52c6fb818e5a91ee",
        "status" : "passed",
        "time" : {
          "start" : 1733446781973,
          "stop" : 1733446809813,
          "duration" : 27840
        }
      }, {
        "uid" : "c561d65bb29f5fb4",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1867/#testresult/c561d65bb29f5fb4",
        "status" : "passed",
        "time" : {
          "start" : 1733409951207,
          "stop" : 1733409979455,
          "duration" : 28248
        }
      }, {
        "uid" : "4d828be688e07cbb",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1866/#testresult/4d828be688e07cbb",
        "status" : "passed",
        "time" : {
          "start" : 1733360127145,
          "stop" : 1733360150921,
          "duration" : 23776
        }
      }, {
        "uid" : "9489b523dbdad49f",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1863/#testresult/9489b523dbdad49f",
        "status" : "passed",
        "time" : {
          "start" : 1733274029486,
          "stop" : 1733274052871,
          "duration" : 23385
        }
      }, {
        "uid" : "9192ed811c949a21",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1859/#testresult/9192ed811c949a21",
        "status" : "passed",
        "time" : {
          "start" : 1733187453029,
          "stop" : 1733187476682,
          "duration" : 23653
        }
      }, {
        "uid" : "d554cf5394e8283",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1858/#testresult/d554cf5394e8283",
        "status" : "passed",
        "time" : {
          "start" : 1733162274068,
          "stop" : 1733162297851,
          "duration" : 23783
        }
      }, {
        "uid" : "23e7ae7337cda912",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1857//#testresult/23e7ae7337cda912",
        "status" : "passed",
        "time" : {
          "start" : 1733101064823,
          "stop" : 1733101088443,
          "duration" : 23620
        }
      }, {
        "uid" : "64a0d64b80f49d6a",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1856//#testresult/64a0d64b80f49d6a",
        "status" : "passed",
        "time" : {
          "start" : 1733015012778,
          "stop" : 1733015040780,
          "duration" : 28002
        }
      }, {
        "uid" : "ca8e51c29c6d2cbd",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1855//#testresult/ca8e51c29c6d2cbd",
        "status" : "passed",
        "time" : {
          "start" : 1732928264455,
          "stop" : 1732928289943,
          "duration" : 25488
        }
      }, {
        "uid" : "24dcddfa255e960f",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1854//#testresult/24dcddfa255e960f",
        "status" : "passed",
        "time" : {
          "start" : 1732842400783,
          "stop" : 1732842424603,
          "duration" : 23820
        }
      }, {
        "uid" : "4ca2c7f6a5bc22b2",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1853//#testresult/4ca2c7f6a5bc22b2",
        "status" : "passed",
        "time" : {
          "start" : 1732755368102,
          "stop" : 1732755391860,
          "duration" : 23758
        }
      }, {
        "uid" : "2862396d31001d18",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1846//#testresult/2862396d31001d18",
        "status" : "passed",
        "time" : {
          "start" : 1732668936587,
          "stop" : 1732668960531,
          "duration" : 23944
        }
      }, {
        "uid" : "bdb3e5dba7210fb0",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1845//#testresult/bdb3e5dba7210fb0",
        "status" : "passed",
        "time" : {
          "start" : 1732643067541,
          "stop" : 1732643091332,
          "duration" : 23791
        }
      }, {
        "uid" : "be7517bd454dd3c2",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1842//#testresult/be7517bd454dd3c2",
        "status" : "passed",
        "time" : {
          "start" : 1732576468883,
          "stop" : 1732576495523,
          "duration" : 26640
        }
      }, {
        "uid" : "3d937edcb8fb32c0",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1842//#testresult/3d937edcb8fb32c0",
        "status" : "passed",
        "time" : {
          "start" : 1732576468883,
          "stop" : 1732576495523,
          "duration" : 26640
        }
      }, {
        "uid" : "af9b4f9ed665249e",
        "reportUrl" : "https://golioth.github.io/allure-reports/main/1843//#testresult/af9b4f9ed665249e",
        "status" : "passed",
        "time" : {
          "start" : 1732582454066,
          "stop" : 1732582477827,
          "duration" : 23761
        }
      } ]
    },
    "tags" : [ "nrf52840dk", "anyio", "tims_orange_pi", "@pytest.mark.usefixtures('anyio_backend')", "zephyr" ]
  },
  "source" : "a74278cbf75a4b54.json",
  "parameterValues" : [ "'nrf52840dk'", "'zephyr'" ]
}