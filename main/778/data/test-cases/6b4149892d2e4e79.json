{"uid":"6b4149892d2e4e79","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"f9f5fc54eebc09467a311bd3212c0fe3","time":{"start":1760749489760,"stop":1760749540959,"duration":51199},"status":"failed","statusMessage":"AssertionError: assert 9 == 5\n +  where 9 = int('9')","statusTrace":"board = <pytest_hil.nrf9160dk.nRF9160DK object at 0xffffa2457230>\ndevice = <golioth.golioth.Device object at 0xffffa2268050>\nproject = <golioth.golioth.Project object at 0xffffa2457e00>\nreleases = {'test_blocks': Release <68f2e78481db3c0394bba724, release_tags=[], device_tags=['68f2e78281db3c0394bba721'], artifact...ease_tags=[], device_tags=['68f2e78281db3c0394bba721'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>, ...}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            retries_left = 20\n    \n            while retries_left:\n                await trio.sleep(1)\n                retries_left -= 1\n    \n                await device.refresh()\n    \n                try:\n                    latest_reason_code = int(device.metadata['update']['lobster']['reasonCode'])\n                except:\n                    if retries_left == 0:\n                        assert false, \"Unable to get reason/state using REST API\"\n                    continue\n    \n                if retries_left == 0 or latest_reason_code == i:\n                    print(f\"Test reason code: {r}\")\n                    print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>                   assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE                   AssertionError: assert 9 == 5\nE                    +  where 9 = int('9')\n\ntests/hil/tests/ota/test_ota.py:214: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1760749422049,"stop":1760749422049,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1760749422050,"stop":1760749422050,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1760749422051,"stop":1760749422051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1760749422052,"stop":1760749422053,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1760749422052,"stop":1760749422052,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1760749422053,"stop":1760749422053,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1760749422054,"stop":1760749422054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1760749422055,"stop":1760749436783,"duration":14728},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1760749436786,"stop":1760749437596,"duration":810},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1760749437597,"stop":1760749438324,"duration":727},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1760749438325,"stop":1760749442021,"duration":3696},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1760749442023,"stop":1760749442488,"duration":465},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1760749442488,"stop":1760749443266,"duration":778},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1760749443266,"stop":1760749445120,"duration":1854},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1760749489757,"stop":1760749489758,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 9 == 5\n +  where 9 = int('9')","statusTrace":"board = <pytest_hil.nrf9160dk.nRF9160DK object at 0xffffa2457230>\ndevice = <golioth.golioth.Device object at 0xffffa2268050>\nproject = <golioth.golioth.Project object at 0xffffa2457e00>\nreleases = {'test_blocks': Release <68f2e78481db3c0394bba724, release_tags=[], device_tags=['68f2e78281db3c0394bba721'], artifact...ease_tags=[], device_tags=['68f2e78281db3c0394bba721'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>, ...}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            retries_left = 20\n    \n            while retries_left:\n                await trio.sleep(1)\n                retries_left -= 1\n    \n                await device.refresh()\n    \n                try:\n                    latest_reason_code = int(device.metadata['update']['lobster']['reasonCode'])\n                except:\n                    if retries_left == 0:\n                        assert false, \"Unable to get reason/state using REST API\"\n                    continue\n    \n                if retries_left == 0 or latest_reason_code == i:\n                    print(f\"Test reason code: {r}\")\n                    print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>                   assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE                   AssertionError: assert 9 == 5\nE                    +  where 9 = int('9')\n\ntests/hil/tests/ota/test_ota.py:214: AssertionError","steps":[],"attachments":[{"uid":"ded309354f073f42","name":"stdout","source":"ded309354f073f42.txt","type":"text/plain","size":632}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1760749541206,"stop":1760749541937,"duration":731},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1760749541940,"stop":1760749543678,"duration":1738},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1760749543680,"stop":1760749544383,"duration":703},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1760749544385,"stop":1760749544385,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1760749544387,"stop":1760749544387,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1760749544389,"stop":1760749544740,"duration":351},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1760749544743,"stop":1760749544743,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1760749544745,"stop":1760749544748,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"nrf9160dk"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.nrf9160dk"},{"name":"tag","value":"mikes_testbench"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"13f2b676cf81"},{"name":"thread","value":"214-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'nrf9160dk'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":16,"skipped":0,"passed":13,"unknown":0,"total":30},"items":[{"uid":"bb650747c1914790","reportUrl":"https://golioth.github.io/allure-reports/main/773//#testresult/bb650747c1914790","status":"broken","statusDetails":"pynrfjprog.APIError.APIError: An error was reported by NRFJPROG DLL: -10 EMULATOR_NOT_CONNECTED. \n[Probes.960047329] [Client] Encountered error -10: Command connect_to_emu_with_snr executed for 833 milliseconds with result -10\n\textra: [Probes.960047329] [DebugProbe] Failed to connect to debug probe\n\textra: [Probes.960047329] [DebugProbe] With serial number \"960047329\".\n\textra: [Probes.960047329] [DebugProbe] And clockspeed \"2000\".\n\textra: [Probes.960047329] [Worker] Could not find the selected serial number.\n\textra: [HighLevel] Failed while initializing probe","time":{"start":1760724402914,"stop":1760724402914,"duration":0}},{"uid":"45fed4724d5f4273","reportUrl":"https://golioth.github.io/allure-reports/main/772//#testresult/45fed4724d5f4273","status":"passed","time":{"start":1760662605984,"stop":1760662659220,"duration":53236}},{"uid":"93011959a1185466","reportUrl":"https://golioth.github.io/allure-reports/main/770//#testresult/93011959a1185466","status":"broken","statusDetails":"pynrfjprog.APIError.APIError: An error was reported by NRFJPROG DLL: -10 EMULATOR_NOT_CONNECTED. \n[Probes.960047329] [Client] Encountered error -10: Command connect_to_emu_with_snr executed for 828 milliseconds with result -10\n\textra: [Probes.960047329] [DebugProbe] Failed to connect to debug probe\n\textra: [Probes.960047329] [DebugProbe] With serial number \"960047329\".\n\textra: [Probes.960047329] [DebugProbe] And clockspeed \"2000\".\n\textra: [Probes.960047329] [Worker] Could not find the selected serial number.\n\textra: [HighLevel] Failed while initializing probe","time":{"start":1760576120400,"stop":1760576120400,"duration":0}},{"uid":"51b5db420b4aef61","reportUrl":"https://golioth.github.io/allure-reports/main/769//#testresult/51b5db420b4aef61","status":"broken","statusDetails":"pynrfjprog.APIError.APIError: An error was reported by NRFJPROG DLL: -10 EMULATOR_NOT_CONNECTED. \n[Probes.960047329] [Client] Encountered error -10: Command connect_to_emu_with_snr executed for 823 milliseconds with result -10\n\textra: [Probes.960047329] [DebugProbe] Failed to connect to debug probe\n\textra: [Probes.960047329] [DebugProbe] With serial number \"960047329\".\n\textra: [Probes.960047329] [DebugProbe] And clockspeed \"2000\".\n\textra: [Probes.960047329] [Worker] Could not find the selected serial number.\n\textra: [HighLevel] Failed while initializing probe","time":{"start":1760489969779,"stop":1760489969779,"duration":0}},{"uid":"8d869a9a49678899","reportUrl":"https://golioth.github.io/allure-reports/main/768//#testresult/8d869a9a49678899","status":"broken","statusDetails":"pynrfjprog.APIError.APIError: An error was reported by NRFJPROG DLL: -10 EMULATOR_NOT_CONNECTED. \n[Probes.960047329] [Client] Encountered error -10: Command connect_to_emu_with_snr executed for 825 milliseconds with result -10\n\textra: [Probes.960047329] [DebugProbe] Failed to connect to debug probe\n\textra: [Probes.960047329] [DebugProbe] With serial number \"960047329\".\n\textra: [Probes.960047329] [DebugProbe] And clockspeed \"2000\".\n\textra: [Probes.960047329] [Worker] Could not find the selected serial number.\n\textra: [HighLevel] Failed while initializing probe","time":{"start":1760478734750,"stop":1760478734750,"duration":0}},{"uid":"8cc339b74750431e","reportUrl":"https://golioth.github.io/allure-reports/main/767//#testresult/8cc339b74750431e","status":"broken","statusDetails":"pynrfjprog.APIError.APIError: An error was reported by NRFJPROG DLL: -10 EMULATOR_NOT_CONNECTED. \n[Probes.960047329] [Client] Encountered error -10: Command connect_to_emu_with_snr executed for 819 milliseconds with result -10\n\textra: [Probes.960047329] [DebugProbe] Failed to connect to debug probe\n\textra: [Probes.960047329] [DebugProbe] With serial number \"960047329\".\n\textra: [Probes.960047329] [DebugProbe] And clockspeed \"2000\".\n\textra: [Probes.960047329] [Worker] Could not find the selected serial number.\n\textra: [HighLevel] Failed while initializing probe","time":{"start":1760400475275,"stop":1760400475275,"duration":0}},{"uid":"4c0558e7abb07e27","reportUrl":"https://golioth.github.io/allure-reports/main/766//#testresult/4c0558e7abb07e27","status":"broken","statusDetails":"pynrfjprog.APIError.APIError: An error was reported by NRFJPROG DLL: -10 EMULATOR_NOT_CONNECTED. \n[Probes.960047329] [Client] Encountered error -10: Command connect_to_emu_with_snr executed for 823 milliseconds with result -10\n\textra: [Probes.960047329] [DebugProbe] Failed to connect to debug probe\n\textra: [Probes.960047329] [DebugProbe] With serial number \"960047329\".\n\textra: [Probes.960047329] [DebugProbe] And clockspeed \"2000\".\n\textra: [Probes.960047329] [Worker] Could not find the selected serial number.\n\textra: [HighLevel] Failed while initializing probe","time":{"start":1760316892361,"stop":1760316892361,"duration":0}},{"uid":"e2ce60e09a6175c1","reportUrl":"https://golioth.github.io/allure-reports/main/765//#testresult/e2ce60e09a6175c1","status":"broken","statusDetails":"pynrfjprog.APIError.APIError: An error was reported by NRFJPROG DLL: -10 EMULATOR_NOT_CONNECTED. \n[Probes.960047329] [Client] Encountered error -10: Command connect_to_emu_with_snr executed for 821 milliseconds with result -10\n\textra: [Probes.960047329] [DebugProbe] Failed to connect to debug probe\n\textra: [Probes.960047329] [DebugProbe] With serial number \"960047329\".\n\textra: [Probes.960047329] [DebugProbe] And clockspeed \"2000\".\n\textra: [Probes.960047329] [Worker] Could not find the selected serial number.\n\textra: [HighLevel] Failed while initializing probe","time":{"start":1760230129486,"stop":1760230129486,"duration":0}},{"uid":"5e1aa5b0d3a11fcc","reportUrl":"https://golioth.github.io/allure-reports/main/763//#testresult/5e1aa5b0d3a11fcc","status":"passed","time":{"start":1760142018154,"stop":1760142071037,"duration":52883}},{"uid":"9282080bb7bb14cb","reportUrl":"https://golioth.github.io/allure-reports/main/762//#testresult/9282080bb7bb14cb","status":"passed","time":{"start":1760057949160,"stop":1760058003388,"duration":54228}},{"uid":"e38fd637ce23775a","reportUrl":"https://golioth.github.io/allure-reports/main/761//#testresult/e38fd637ce23775a","status":"broken","statusDetails":"trio.TooSlowError","time":{"start":1760042373615,"stop":1760042373615,"duration":0}},{"uid":"d45d92639758dc35","reportUrl":"https://golioth.github.io/allure-reports/main/758//#testresult/d45d92639758dc35","status":"broken","statusDetails":"httpx.ConnectError: [Errno -5] No address associated with hostname","time":{"start":1759994887637,"stop":1759994909655,"duration":22018}},{"uid":"1fc3da2f22471772","reportUrl":"https://golioth.github.io/allure-reports/main/757//#testresult/1fc3da2f22471772","status":"passed","time":{"start":1759971763782,"stop":1759971821385,"duration":57603}},{"uid":"3277e7dbc550945c","reportUrl":"https://golioth.github.io/allure-reports/main/753//#testresult/3277e7dbc550945c","status":"broken","statusDetails":"NameError: name 'false' is not defined","time":{"start":1759882159777,"stop":1759882187583,"duration":27806}},{"uid":"747d06e614bd5957","reportUrl":"https://golioth.github.io/allure-reports/main/752//#testresult/747d06e614bd5957","status":"broken","statusDetails":"httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'https://api.golioth.io/v1/projects/firmware_ci/tags/68e5586d62fb6aa144e21048'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500","time":{"start":1759860875239,"stop":1759860931940,"duration":56701}},{"uid":"a1e038947032c52","reportUrl":"https://golioth.github.io/allure-reports/main/751//#testresult/a1e038947032c52","status":"passed","time":{"start":1759848253147,"stop":1759848313900,"duration":60753}},{"uid":"97c65a83ecbcf07","reportUrl":"https://golioth.github.io/allure-reports/main/750//#testresult/97c65a83ecbcf07","status":"broken","statusDetails":"trio.TooSlowError","time":{"start":1759795836020,"stop":1759795836020,"duration":0}},{"uid":"21a83d61de61855f","reportUrl":"https://golioth.github.io/allure-reports/main/746//#testresult/21a83d61de61855f","status":"passed","time":{"start":1759782716275,"stop":1759782779405,"duration":63130}},{"uid":"2fea46561dca840d","reportUrl":"https://golioth.github.io/allure-reports/main/742//#testresult/2fea46561dca840d","status":"passed","time":{"start":1759713460374,"stop":1759713513991,"duration":53617}},{"uid":"6199b2a3385821ef","reportUrl":"https://golioth.github.io/allure-reports/main/741//#testresult/6199b2a3385821ef","status":"passed","time":{"start":1759626469054,"stop":1759626546298,"duration":77244}}]},"tags":["nrf9160dk","anyio","mikes_testbench","zephyr"]},"source":"6b4149892d2e4e79.json","parameterValues":["'nrf9160dk'","'zephyr'"]}