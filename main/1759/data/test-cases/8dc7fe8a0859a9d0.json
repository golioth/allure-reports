{"uid":"8dc7fe8a0859a9d0","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"efe21cbbb5934f0489b65e4b580675bb","time":{"start":1731890832657,"stop":1731890906309,"duration":73652},"status":"failed","statusMessage":"AssertionError: assert 9 == 8\n +  where 9 = int('9')","statusTrace":"board = <rak5010.RAK5010 object at 0xffff9e1a6750>\ndevice = <golioth.golioth.Device object at 0xffff9e095110>\nproject = <golioth.golioth.Project object at 0xffff9f739510>\nreleases = {'test_blocks': Release <673a8e76991409ec59c69bee, release_tags=[], device_tags=['673a8e74991409ec59c69beb'], artifact..., release_tags=[], device_tags=['673a8e74991409ec59c69beb'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 9 == 8\nE            +  where 9 = int('9')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1731890754497,"stop":1731890754498,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1731890754499,"stop":1731890754499,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1731890754499,"stop":1731890754500,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1731890754500,"stop":1731890754501,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1731890754501,"stop":1731890754501,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1731890754502,"stop":1731890754502,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1731890754503,"stop":1731890754503,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1731890754504,"stop":1731890754504,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1731890754505,"stop":1731890754505,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1731890754506,"stop":1731890754507,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1731890754507,"stop":1731890754508,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1731890754508,"stop":1731890754509,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1731890754509,"stop":1731890773525,"duration":19016},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1731890773526,"stop":1731890773970,"duration":444},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1731890773971,"stop":1731890774811,"duration":840},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1731890774811,"stop":1731890804089,"duration":29278},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1731890804091,"stop":1731890804568,"duration":477},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1731890804569,"stop":1731890805395,"duration":826},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1731890805396,"stop":1731890807040,"duration":1644},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1731890832653,"stop":1731890832654,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 9 == 8\n +  where 9 = int('9')","statusTrace":"board = <rak5010.RAK5010 object at 0xffff9e1a6750>\ndevice = <golioth.golioth.Device object at 0xffff9e095110>\nproject = <golioth.golioth.Project object at 0xffff9f739510>\nreleases = {'test_blocks': Release <673a8e76991409ec59c69bee, release_tags=[], device_tags=['673a8e74991409ec59c69beb'], artifact..., release_tags=[], device_tags=['673a8e74991409ec59c69beb'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 9 == 8\nE            +  where 9 = int('9')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"1a3aafda8be0f3c7","name":"stdout","source":"1a3aafda8be0f3c7.txt","type":"text/plain","size":4061}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1731890906476,"stop":1731890907424,"duration":948},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1731890907426,"stop":1731890908883,"duration":1457},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1731890908885,"stop":1731890909629,"duration":744},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1731890909631,"stop":1731890909631,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1731890909633,"stop":1731890909633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1731890909635,"stop":1731890910076,"duration":441},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1731890910079,"stop":1731890910079,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1731890910081,"stop":1731890910099,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"rak5010"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.rak5010"},{"name":"tag","value":"mikes_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"6f385d4d2eb0"},{"name":"thread","value":"258-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'rak5010'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":7,"broken":0,"skipped":0,"passed":43,"unknown":0,"total":50},"items":[{"uid":"c6fbb43459b1ff98","reportUrl":"https://golioth.github.io/allure-reports/main/1758//#testresult/c6fbb43459b1ff98","status":"passed","time":{"start":1731804455847,"stop":1731804539166,"duration":83319}},{"uid":"a619185a00d0898b","reportUrl":"https://golioth.github.io/allure-reports/main/1757//#testresult/a619185a00d0898b","status":"passed","time":{"start":1731718030617,"stop":1731718113863,"duration":83246}},{"uid":"4e1bc52a5243fd68","reportUrl":"https://golioth.github.io/allure-reports/main/1748//#testresult/4e1bc52a5243fd68","status":"passed","time":{"start":1731631574887,"stop":1731631657844,"duration":82957}},{"uid":"e53abb174b025548","reportUrl":"https://golioth.github.io/allure-reports/main/13//#testresult/e53abb174b025548","status":"passed","time":{"start":1731606541239,"stop":1731606624613,"duration":83374}},{"uid":"accf720f8839e209","reportUrl":"https://golioth.github.io/allure-reports/main/1741//#testresult/accf720f8839e209","status":"passed","time":{"start":1731565281572,"stop":1731565365041,"duration":83469}},{"uid":"6611ef0f060c3cb1","reportUrl":"https://golioth.github.io/allure-reports/main/1738//#testresult/6611ef0f060c3cb1","status":"passed","time":{"start":1731544971883,"stop":1731545054838,"duration":82955}},{"uid":"a017bc1961962dc2","reportUrl":"https://golioth.github.io/allure-reports/main/1728//#testresult/a017bc1961962dc2","status":"passed","time":{"start":1731458731736,"stop":1731458814934,"duration":83198}},{"uid":"a8aca31bde1035cc","reportUrl":"https://golioth.github.io/allure-reports/main/1724//#testresult/a8aca31bde1035cc","status":"passed","time":{"start":1731372164384,"stop":1731372247326,"duration":82942}},{"uid":"dc8f889f3473aa12","reportUrl":"https://golioth.github.io/allure-reports/main/1723//#testresult/dc8f889f3473aa12","status":"failed","statusDetails":"AssertionError: assert 5 == 4\n +  where 5 = int('5')","time":{"start":1731285941822,"stop":1731285985286,"duration":43464}},{"uid":"371a28ff68fe0a8d","reportUrl":"https://golioth.github.io/allure-reports/main/1722//#testresult/371a28ff68fe0a8d","status":"passed","time":{"start":1731199561394,"stop":1731199644879,"duration":83485}},{"uid":"165dd8d5164bec75","reportUrl":"https://golioth.github.io/allure-reports/main/1721//#testresult/165dd8d5164bec75","status":"passed","time":{"start":1731113002438,"stop":1731113085602,"duration":83164}},{"uid":"d0795de01ee9c12e","reportUrl":"https://golioth.github.io/allure-reports/main/1718//#testresult/d0795de01ee9c12e","status":"passed","time":{"start":1731026640465,"stop":1731026722720,"duration":82255}},{"uid":"4ede673de1e93a67","reportUrl":"https://golioth.github.io/allure-reports/main/1717//#testresult/4ede673de1e93a67","status":"passed","time":{"start":1730940220398,"stop":1730940303813,"duration":83415}},{"uid":"3a84128629e9b0c1","reportUrl":"https://golioth.github.io/allure-reports/main/1716//#testresult/3a84128629e9b0c1","status":"passed","time":{"start":1730894731684,"stop":1730894813726,"duration":82042}},{"uid":"44ce4609c1f8d381","reportUrl":"https://golioth.github.io/allure-reports/main/1716//#testresult/44ce4609c1f8d381","status":"passed","time":{"start":1730853866714,"stop":1730853948521,"duration":81807}},{"uid":"d42dbcdead6edf4","reportUrl":"https://golioth.github.io/allure-reports/main/1715//#testresult/d42dbcdead6edf4","status":"passed","time":{"start":1730767461641,"stop":1730767543519,"duration":81878}},{"uid":"98c1555d513f78e7","reportUrl":"https://golioth.github.io/allure-reports/main/1714//#testresult/98c1555d513f78e7","status":"passed","time":{"start":1730681130687,"stop":1730681213486,"duration":82799}},{"uid":"fc570782e309fcbe","reportUrl":"https://golioth.github.io/allure-reports/main/1713//#testresult/fc570782e309fcbe","status":"passed","time":{"start":1730594782940,"stop":1730594867523,"duration":84583}},{"uid":"3b58d1143d5f840e","reportUrl":"https://golioth.github.io/allure-reports/main/1711//#testresult/3b58d1143d5f840e","status":"passed","time":{"start":1730507627871,"stop":1730507710843,"duration":82972}},{"uid":"4ec5411958400c16","reportUrl":"https://golioth.github.io/allure-reports/main/1709//#testresult/4ec5411958400c16","status":"passed","time":{"start":1730421407718,"stop":1730421492160,"duration":84442}}]},"tags":["mikes_orange_pi","anyio","@pytest.mark.usefixtures('anyio_backend')","rak5010","zephyr"]},"source":"8dc7fe8a0859a9d0.json","parameterValues":["'rak5010'","'zephyr'"]}