{"uid":"42f7379ca56226d0","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"efe21cbbb5934f0489b65e4b580675bb","time":{"start":1730303919641,"stop":1730303940343,"duration":20702},"status":"failed","statusMessage":"AssertionError: assert 2 == 1\n +  where 2 = int('2')","statusTrace":"board = <rak5010.RAK5010 object at 0xffffa32a7e50>\ndevice = <golioth.golioth.Device object at 0xffffa32880d0>\nproject = <golioth.golioth.Project object at 0xffffa31fce90>\nreleases = {'test_blocks': Release <6722579c990e7ed8707e3bb7, release_tags=[], device_tags=['6722579a990e7ed8707e3bb4'], artifact..., release_tags=[], device_tags=['6722579a990e7ed8707e3bb4'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 2 == 1\nE            +  where 2 = int('2')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1730303848845,"stop":1730303848846,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"board_name","time":{"start":1730303848846,"stop":1730303848847,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"port","time":{"start":1730303848847,"stop":1730303848848,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"baud","time":{"start":1730303848848,"stop":1730303848848,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"wifi_ssid","time":{"start":1730303848849,"stop":1730303848849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"wifi_psk","time":{"start":1730303848850,"stop":1730303848850,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"fw_image","time":{"start":1730303848850,"stop":1730303848850,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"serial_number","time":{"start":1730303848851,"stop":1730303848851,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"bmp_port","time":{"start":1730303848852,"stop":1730303848852,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"api_url","time":{"start":1730303848853,"stop":1730303848853,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"api_key","time":{"start":1730303848853,"stop":1730303848853,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"device_name","time":{"start":1730303848854,"stop":1730303848854,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"board","time":{"start":1730303848854,"stop":1730303867846,"duration":18992},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"project","time":{"start":1730303867848,"stop":1730303868342,"duration":494},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"device","time":{"start":1730303868343,"stop":1730303869236,"duration":893},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"setup","time":{"start":1730303869236,"stop":1730303897855,"duration":28619},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"artifacts","time":{"start":1730303897857,"stop":1730303898364,"duration":507},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"tag","time":{"start":1730303898365,"stop":1730303899146,"duration":781},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"releases","time":{"start":1730303899147,"stop":1730303900748,"duration":1601},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"releases_teardown","time":{"start":1730303919637,"stop":1730303919638,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 2 == 1\n +  where 2 = int('2')","statusTrace":"board = <rak5010.RAK5010 object at 0xffffa32a7e50>\ndevice = <golioth.golioth.Device object at 0xffffa32880d0>\nproject = <golioth.golioth.Project object at 0xffffa31fce90>\nreleases = {'test_blocks': Release <6722579c990e7ed8707e3bb7, release_tags=[], device_tags=['6722579a990e7ed8707e3bb4'], artifact..., release_tags=[], device_tags=['6722579a990e7ed8707e3bb4'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 2 == 1\nE            +  where 2 = int('2')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"fe31533447b604fd","name":"stdout","source":"fe31533447b604fd.txt","type":"text/plain","size":1605}],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true},"afterStages":[{"name":"releases_teardown::0","time":{"start":1730303940510,"stop":1730303941602,"duration":1092},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"releases::0","time":{"start":1730303941605,"stop":1730303943084,"duration":1479},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"tag::0","time":{"start":1730303943086,"stop":1730303943842,"duration":756},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"artifacts::0","time":{"start":1730303943844,"stop":1730303943844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"setup::0","time":{"start":1730303943846,"stop":1730303943846,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"device::0","time":{"start":1730303943848,"stop":1730303944276,"duration":428},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"project::0","time":{"start":1730303944278,"stop":1730303944279,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"board::0","time":{"start":1730303944280,"stop":1730303944298,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"tag","value":"rak5010"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.rak5010"},{"name":"tag","value":"mikes_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"40b7fc566e2b"},{"name":"thread","value":"259-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'rak5010'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":0,"skipped":0,"passed":23,"unknown":0,"total":28},"items":[{"uid":"39ccf5596491f9d9","reportUrl":"https://golioth.github.io/allure-reports/main/1703//#testresult/39ccf5596491f9d9","status":"passed","time":{"start":1730249038820,"stop":1730249121489,"duration":82669}},{"uid":"6f3934c271d2754e","reportUrl":"https://golioth.github.io/allure-reports/main/1701//#testresult/6f3934c271d2754e","status":"failed","statusDetails":"AssertionError: assert 6 == 5\n +  where 6 = int('6')","time":{"start":1730162758219,"stop":1730162809583,"duration":51364}},{"uid":"ef522c5542b7b4d","reportUrl":"https://golioth.github.io/allure-reports/main/1700//#testresult/ef522c5542b7b4d","status":"passed","time":{"start":1730076457465,"stop":1730076540441,"duration":82976}},{"uid":"8b40c73c15425e25","reportUrl":"https://golioth.github.io/allure-reports/main/1699//#testresult/8b40c73c15425e25","status":"passed","time":{"start":1729990090824,"stop":1729990173731,"duration":82907}},{"uid":"915a689fd0d0ef81","reportUrl":"https://golioth.github.io/allure-reports/main/1698//#testresult/915a689fd0d0ef81","status":"passed","time":{"start":1729903510569,"stop":1729903592678,"duration":82109}},{"uid":"ae197145ef5462bb","reportUrl":"https://golioth.github.io/allure-reports/main/1697//#testresult/ae197145ef5462bb","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = int('1')","time":{"start":1729817163756,"stop":1729817178495,"duration":14739}},{"uid":"202c8c7662d806ce","reportUrl":"https://golioth.github.io/allure-reports/main/1695//#testresult/202c8c7662d806ce","status":"passed","time":{"start":1729730619427,"stop":1729730702210,"duration":82783}},{"uid":"e5159191efb40368","reportUrl":"https://golioth.github.io/allure-reports/main/1689//#testresult/e5159191efb40368","status":"passed","time":{"start":1729644331395,"stop":1729644415317,"duration":83922}},{"uid":"b3fb4da9d4e45f35","reportUrl":"https://golioth.github.io/allure-reports/main/1688//#testresult/b3fb4da9d4e45f35","status":"passed","time":{"start":1729557938904,"stop":1729558021403,"duration":82499}},{"uid":"3c079abc5c60308e","reportUrl":"https://golioth.github.io/allure-reports/main/1684//#testresult/3c079abc5c60308e","status":"passed","time":{"start":1729471560669,"stop":1729471643264,"duration":82595}},{"uid":"8dbeb5b93810bac7","reportUrl":"https://golioth.github.io/allure-reports/main/1683//#testresult/8dbeb5b93810bac7","status":"passed","time":{"start":1729385270598,"stop":1729385353673,"duration":83075}},{"uid":"1e82dba81d3c6d20","reportUrl":"https://golioth.github.io/allure-reports/main/1//#testresult/1e82dba81d3c6d20","status":"passed","time":{"start":1729369202789,"stop":1729369285958,"duration":83169}},{"uid":"e94d83f85312be94","reportUrl":"https://golioth.github.io/allure-reports/main/1//#testresult/e94d83f85312be94","status":"failed","statusDetails":"AssertionError: assert 1 == 5\n +  where 1 = len({'multi_artifact': Artifact <65f896d09b3bc69827b4cb21, package=walrus, version=0.4.2, blueprint=None>})","time":{"start":1729361984317,"stop":1729361984317,"duration":0}},{"uid":"b53ffb09d3962d4e","reportUrl":"https://golioth.github.io/allure-reports/main/1676//#testresult/b53ffb09d3962d4e","status":"passed","time":{"start":1729298685538,"stop":1729298768859,"duration":83321}},{"uid":"6d230b8e481e6d79","reportUrl":"https://golioth.github.io/allure-reports/main/1675//#testresult/6d230b8e481e6d79","status":"passed","time":{"start":1729212289809,"stop":1729212373400,"duration":83591}},{"uid":"2787f64da1923d5d","reportUrl":"https://golioth.github.io/allure-reports/main/1674//#testresult/2787f64da1923d5d","status":"passed","time":{"start":1729203371856,"stop":1729203455605,"duration":83749}},{"uid":"11570190c443ec52","reportUrl":"https://golioth.github.io/allure-reports/main/1659//#testresult/11570190c443ec52","status":"passed","time":{"start":1729129217110,"stop":1729129300606,"duration":83496}},{"uid":"5778c43c9cc4d7f3","reportUrl":"https://golioth.github.io/allure-reports/main/1649//#testresult/5778c43c9cc4d7f3","status":"passed","time":{"start":1729110065299,"stop":1729110148671,"duration":83372}},{"uid":"a35067733c88975f","reportUrl":"https://golioth.github.io/allure-reports/main/1647//#testresult/a35067733c88975f","status":"passed","time":{"start":1729038833176,"stop":1729038915971,"duration":82795}},{"uid":"63d5ba217b985636","reportUrl":"https://golioth.github.io/allure-reports/main/1643//#testresult/63d5ba217b985636","status":"passed","time":{"start":1729026226017,"stop":1729026308480,"duration":82463}}]},"tags":["mikes_orange_pi","anyio","@pytest.mark.usefixtures('anyio_backend')","rak5010","zephyr"]},"source":"42f7379ca56226d0.json","parameterValues":["'rak5010'","'zephyr'"]}