{"uid":"7122f15fd43fe27e","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"2f204ffe20d9a076758a1035d6c7af62","time":{"start":1732223765809,"stop":1732223807492,"duration":41683},"status":"failed","statusMessage":"AssertionError: assert 9 == 2\n +  where 9 = int('9')","statusTrace":"board = <nrf52840dk.nRF52840DK object at 0xffff9a835650>\ndevice = <golioth.golioth.Device object at 0xffff9a82ae10>\nproject = <golioth.golioth.Project object at 0xffff9a837550>\nreleases = {'test_blocks': Release <673fa30bbb6157cf6cdf5526, release_tags=[], device_tags=['673fa309bb6157cf6cdf5523'], artifact..., release_tags=[], device_tags=['673fa309bb6157cf6cdf5523'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            retries_left = 20\n    \n            while retries_left:\n                await trio.sleep(1)\n                retries_left -= 1\n    \n                await device.refresh()\n    \n                try:\n                    latest_reason_code = int(device.metadata['update']['lobster']['reasonCode'])\n                except:\n                    if retries_left == 0:\n                        assert false, \"Unable to get reason/state using REST API\"\n                    continue\n    \n                if retries_left == 0 or latest_reason_code == i:\n                    print(f\"Test reason code: {r}\")\n                    print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>                   assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE                   AssertionError: assert 9 == 2\nE                    +  where 9 = int('9')\n\ntests/hil/tests/ota/test_ota.py:198: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1732223730272,"stop":1732223730273,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1732223730274,"stop":1732223730274,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1732223730275,"stop":1732223730275,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1732223730276,"stop":1732223730277,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1732223730277,"stop":1732223730278,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1732223730278,"stop":1732223730278,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1732223730279,"stop":1732223730280,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1732223730280,"stop":1732223730281,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1732223730281,"stop":1732223730282,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1732223730282,"stop":1732223730283,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1732223730283,"stop":1732223730284,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1732223730284,"stop":1732223730284,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1732223730285,"stop":1732223743095,"duration":12810},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1732223743098,"stop":1732223743575,"duration":477},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1732223743576,"stop":1732223744737,"duration":1161},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1732223744738,"stop":1732223752091,"duration":7353},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1732223752093,"stop":1732223752677,"duration":584},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1732223752678,"stop":1732223753854,"duration":1176},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1732223753854,"stop":1732223756408,"duration":2554},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1732223765805,"stop":1732223765806,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 9 == 2\n +  where 9 = int('9')","statusTrace":"board = <nrf52840dk.nRF52840DK object at 0xffff9a835650>\ndevice = <golioth.golioth.Device object at 0xffff9a82ae10>\nproject = <golioth.golioth.Project object at 0xffff9a837550>\nreleases = {'test_blocks': Release <673fa30bbb6157cf6cdf5526, release_tags=[], device_tags=['673fa309bb6157cf6cdf5523'], artifact..., release_tags=[], device_tags=['673fa309bb6157cf6cdf5523'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            retries_left = 20\n    \n            while retries_left:\n                await trio.sleep(1)\n                retries_left -= 1\n    \n                await device.refresh()\n    \n                try:\n                    latest_reason_code = int(device.metadata['update']['lobster']['reasonCode'])\n                except:\n                    if retries_left == 0:\n                        assert false, \"Unable to get reason/state using REST API\"\n                    continue\n    \n                if retries_left == 0 or latest_reason_code == i:\n                    print(f\"Test reason code: {r}\")\n                    print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>                   assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE                   AssertionError: assert 9 == 2\nE                    +  where 9 = int('9')\n\ntests/hil/tests/ota/test_ota.py:198: AssertionError","steps":[],"attachments":[{"uid":"234a5a9565f64591","name":"stdout","source":"234a5a9565f64591.txt","type":"text/plain","size":285}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1732223807665,"stop":1732223808926,"duration":1261},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1732223808928,"stop":1732223810742,"duration":1814},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1732223810744,"stop":1732223811762,"duration":1018},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1732223811764,"stop":1732223811765,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1732223811766,"stop":1732223811766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1732223811768,"stop":1732223812183,"duration":415},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1732223812186,"stop":1732223812186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1732223812188,"stop":1732223812225,"duration":37},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"nrf52840dk"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.nrf52840dk"},{"name":"tag","value":"sams_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"e5b42e00da9a"},{"name":"thread","value":"281-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'nrf52840dk'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":5,"skipped":0,"passed":56,"unknown":0,"total":66},"items":[{"uid":"6673e33f04bb4559","reportUrl":"https://golioth.github.io/allure-reports/branch/1815//#testresult/6673e33f04bb4559","status":"passed","time":{"start":1732214817112,"stop":1732214865441,"duration":48329}},{"uid":"6c8366390e1c622e","reportUrl":"https://golioth.github.io/allure-reports/branch/1805//#testresult/6c8366390e1c622e","status":"passed","time":{"start":1732193879175,"stop":1732193926710,"duration":47535}},{"uid":"34738dff5ca88dd","reportUrl":"https://golioth.github.io/allure-reports/branch/1807//#testresult/34738dff5ca88dd","status":"passed","time":{"start":1732207022989,"stop":1732207072180,"duration":49191}},{"uid":"2157ca71a314e6ce","reportUrl":"https://golioth.github.io/allure-reports/branch/1806//#testresult/2157ca71a314e6ce","status":"passed","time":{"start":1732205846096,"stop":1732205893948,"duration":47852}},{"uid":"351c4e44e89dc1b0","reportUrl":"https://golioth.github.io/allure-reports/branch/1798//#testresult/351c4e44e89dc1b0","status":"passed","time":{"start":1732204280340,"stop":1732204328205,"duration":47865}},{"uid":"6706fab4056ee305","reportUrl":"https://golioth.github.io/allure-reports/branch/1805//#testresult/6706fab4056ee305","status":"passed","time":{"start":1732193879175,"stop":1732193926710,"duration":47535}},{"uid":"958ee6dcc2eac8b1","reportUrl":"https://golioth.github.io/allure-reports/branch/1799//#testresult/958ee6dcc2eac8b1","status":"passed","time":{"start":1732187481800,"stop":1732187529277,"duration":47477}},{"uid":"9383f6dd94acb26a","reportUrl":"https://golioth.github.io/allure-reports/branch/1798//#testresult/9383f6dd94acb26a","status":"passed","time":{"start":1732192829834,"stop":1732192880545,"duration":50711}},{"uid":"83a3dc0617bb66f3","reportUrl":"https://golioth.github.io/allure-reports/branch/1805//#testresult/83a3dc0617bb66f3","status":"passed","time":{"start":1732193879175,"stop":1732193926710,"duration":47535}},{"uid":"2e081897fd7d12ed","reportUrl":"https://golioth.github.io/allure-reports/branch/1799//#testresult/2e081897fd7d12ed","status":"passed","time":{"start":1732187481800,"stop":1732187529277,"duration":47477}},{"uid":"87bc3bff8ca55d00","reportUrl":"https://golioth.github.io/allure-reports/branch/1798//#testresult/87bc3bff8ca55d00","status":"passed","time":{"start":1732192829834,"stop":1732192880545,"duration":50711}},{"uid":"8c46f8b94bd91468","reportUrl":"https://golioth.github.io/allure-reports/branch/1799//#testresult/8c46f8b94bd91468","status":"passed","time":{"start":1732187481800,"stop":1732187529277,"duration":47477}},{"uid":"a0cee8d93a39bffd","reportUrl":"https://golioth.github.io/allure-reports/branch/1798//#testresult/a0cee8d93a39bffd","status":"failed","statusDetails":"AssertionError: assert 9 == 2\n +  where 9 = int('9')","time":{"start":1732186175340,"stop":1732186216234,"duration":40894}},{"uid":"67acad684bfbb9f6","reportUrl":"https://golioth.github.io/allure-reports/branch/1796//#testresult/67acad684bfbb9f6","status":"passed","time":{"start":1732153158671,"stop":1732153206768,"duration":48097}},{"uid":"52b2fee1d7dc0a1a","reportUrl":"https://golioth.github.io/allure-reports/branch/1799//#testresult/52b2fee1d7dc0a1a","status":"passed","time":{"start":1732143886602,"stop":1732143934694,"duration":48092}},{"uid":"fd30543ad52c278c","reportUrl":"https://golioth.github.io/allure-reports/branch/1798//#testresult/fd30543ad52c278c","status":"passed","time":{"start":1732142872595,"stop":1732142921325,"duration":48730}},{"uid":"daa17e8c2a0ca53a","reportUrl":"https://golioth.github.io/allure-reports/branch/1797//#testresult/daa17e8c2a0ca53a","status":"passed","time":{"start":1732141769460,"stop":1732141816981,"duration":47521}},{"uid":"6e6b2082447c921d","reportUrl":"https://golioth.github.io/allure-reports/branch/1796//#testresult/6e6b2082447c921d","status":"passed","time":{"start":1732141769460,"stop":1732141816981,"duration":47521}},{"uid":"7f65e1fe02ae4c9c","reportUrl":"https://golioth.github.io/allure-reports/branch/1792//#testresult/7f65e1fe02ae4c9c","status":"passed","time":{"start":1732133191008,"stop":1732133238739,"duration":47731}},{"uid":"8c6f2da18709dbb5","reportUrl":"https://golioth.github.io/allure-reports/branch/1785//#testresult/8c6f2da18709dbb5","status":"passed","time":{"start":1732042169103,"stop":1732042216941,"duration":47838}}]},"tags":["nrf52840dk","anyio","sams_orange_pi","@pytest.mark.usefixtures('anyio_backend')","zephyr"]},"source":"7122f15fd43fe27e.json","parameterValues":["'nrf52840dk'","'zephyr'"]}