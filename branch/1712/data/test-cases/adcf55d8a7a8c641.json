{"uid":"adcf55d8a7a8c641","name":"test_reason_and_state","fullName":"tests.hil.tests.ota.test_ota#test_reason_and_state","historyId":"2f204ffe20d9a076758a1035d6c7af62","time":{"start":1730560077835,"stop":1730560148084,"duration":70249},"status":"failed","statusMessage":"AssertionError: assert 9 == 8\n +  where 9 = int('9')","statusTrace":"board = <nrf52840dk.nRF52840DK object at 0xffffac0471d0>\ndevice = <golioth.golioth.Device object at 0xffffac029110>\nproject = <golioth.golioth.Project object at 0xffffac044e50>\nreleases = {'test_blocks': Release <6726403caca4baf7587471c3, release_tags=[], device_tags=['6726403aaca4baf7587471c0'], artifact..., release_tags=[], device_tags=['6726403aaca4baf7587471c0'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 9 == 8\nE            +  where 9 = int('9')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"anyio_backend","time":{"start":1730560035095,"stop":1730560035095,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_name","time":{"start":1730560035096,"stop":1730560035097,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"port","time":{"start":1730560035098,"stop":1730560035098,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"baud","time":{"start":1730560035099,"stop":1730560035099,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_ssid","time":{"start":1730560035100,"stop":1730560035100,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wifi_psk","time":{"start":1730560035101,"stop":1730560035102,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fw_image","time":{"start":1730560035103,"stop":1730560035103,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"serial_number","time":{"start":1730560035104,"stop":1730560035104,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_key","time":{"start":1730560035105,"stop":1730560035106,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"bmp_port","time":{"start":1730560035105,"stop":1730560035105,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_url","time":{"start":1730560035106,"stop":1730560035106,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device_name","time":{"start":1730560035106,"stop":1730560035107,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board","time":{"start":1730560035107,"stop":1730560047845,"duration":12738},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1730560047848,"stop":1730560048433,"duration":585},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1730560048434,"stop":1730560049641,"duration":1207},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1730560049641,"stop":1730560056669,"duration":7028},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts","time":{"start":1730560056670,"stop":1730560057416,"duration":746},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag","time":{"start":1730560057417,"stop":1730560058667,"duration":1250},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases","time":{"start":1730560058668,"stop":1730560061174,"duration":2506},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases_teardown","time":{"start":1730560077832,"stop":1730560077832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 9 == 8\n +  where 9 = int('9')","statusTrace":"board = <nrf52840dk.nRF52840DK object at 0xffffac0471d0>\ndevice = <golioth.golioth.Device object at 0xffffac029110>\nproject = <golioth.golioth.Project object at 0xffffac044e50>\nreleases = {'test_blocks': Release <6726403caca4baf7587471c3, release_tags=[], device_tags=['6726403aaca4baf7587471c0'], artifact..., release_tags=[], device_tags=['6726403aaca4baf7587471c0'], artifact_ids=['65f224ee02bfe41201d4b3c9'], rollout=False>}\n\n    async def test_reason_and_state(board, device, project, releases):\n        await project.releases.rollout_set(releases[\"test_reasons\"].id, True)\n        # Test reason and state code updates\n    \n        for i, r in enumerate(golioth_ota_reason):\n            await board.wait_for_regex_in_line(\"OTA status reported successfully\", timeout_s=20)\n    \n            # Wait for state update to propagate\n            await trio.sleep(2)\n    \n            await device.refresh()\n    \n            print(f\"Test reason code: {r}\")\n            print(f\"Received reason: {device.metadata['update']['lobster']['reason']}\")\n    \n>           assert int(device.metadata['update']['lobster']['reasonCode']) == i\nE           AssertionError: assert 9 == 8\nE            +  where 9 = int('9')\n\ntests/hil/tests/ota/test_ota.py:189: AssertionError","steps":[],"attachments":[{"uid":"34430e6ff4d4e6ab","name":"stdout","source":"34430e6ff4d4e6ab.txt","type":"text/plain","size":3837}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"releases_teardown::0","time":{"start":1730560148159,"stop":1730560149699,"duration":1540},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"releases::0","time":{"start":1730560149701,"stop":1730560151624,"duration":1923},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tag::0","time":{"start":1730560151626,"stop":1730560152782,"duration":1156},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"artifacts::0","time":{"start":1730560152784,"stop":1730560152784,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1730560152786,"stop":1730560152786,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device::0","time":{"start":1730560152788,"stop":1730560153261,"duration":473},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1730560153264,"stop":1730560153264,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board::0","time":{"start":1730560153266,"stop":1730560153307,"duration":41},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"nrf52840dk"},{"name":"tag","value":"zephyr"},{"name":"parentSuite","value":"hil.zephyr.nrf52840dk"},{"name":"tag","value":"sams_orange_pi"},{"name":"tag","value":"@pytest.mark.usefixtures('anyio_backend')"},{"name":"tag","value":"anyio"},{"name":"suite","value":"test_ota"},{"name":"host","value":"27225e887383"},{"name":"thread","value":"282-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.hil.tests.ota.test_ota"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"board_name","value":"'nrf52840dk'"},{"name":"platform_name","value":"'zephyr'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":4,"skipped":0,"passed":21,"unknown":0,"total":27},"items":[{"uid":"ba17261f02271900","reportUrl":"https://golioth.github.io/allure-reports/branch/1710//#testresult/ba17261f02271900","status":"passed","time":{"start":1730471905655,"stop":1730471984237,"duration":78582}},{"uid":"b84045c873478cd3","reportUrl":"https://golioth.github.io/allure-reports/branch/1710//#testresult/b84045c873478cd3","status":"passed","time":{"start":1730461027127,"stop":1730461104486,"duration":77359}},{"uid":"7f8fccefc62cc2ee","reportUrl":"https://golioth.github.io/allure-reports/branch/1708//#testresult/7f8fccefc62cc2ee","status":"passed","time":{"start":1730407987723,"stop":1730408066522,"duration":78799}},{"uid":"c73ffe2c2ebc4fc9","reportUrl":"https://golioth.github.io/allure-reports/branch/1707//#testresult/c73ffe2c2ebc4fc9","status":"passed","time":{"start":1730382304576,"stop":1730382382109,"duration":77533}},{"uid":"8ecb2452afacef3f","reportUrl":"https://golioth.github.io/allure-reports/branch/1706//#testresult/8ecb2452afacef3f","status":"passed","time":{"start":1730360710307,"stop":1730360787770,"duration":77463}},{"uid":"8df46546d42cf5a8","reportUrl":"https://golioth.github.io/allure-reports/branch/1702//#testresult/8df46546d42cf5a8","status":"passed","time":{"start":1730234506230,"stop":1730234583926,"duration":77696}},{"uid":"b95c1b63f7b00844","reportUrl":"https://golioth.github.io/allure-reports/branch/1696//#testresult/b95c1b63f7b00844","status":"passed","time":{"start":1729787628241,"stop":1729787707531,"duration":79290}},{"uid":"875da3788f3776f6","reportUrl":"https://golioth.github.io/allure-reports/branch/1694//#testresult/875da3788f3776f6","status":"broken","statusDetails":"trio.TooSlowError","time":{"start":1729780575131,"stop":1729780595537,"duration":20406}},{"uid":"e0d4d35895724a5e","reportUrl":"https://golioth.github.io/allure-reports/branch/1694//#testresult/e0d4d35895724a5e","status":"broken","statusDetails":"trio.TooSlowError","time":{"start":1729723327570,"stop":1729723348380,"duration":20810}},{"uid":"f7ce87d700f625ec","reportUrl":"https://golioth.github.io/allure-reports/branch/1693//#testresult/f7ce87d700f625ec","status":"failed","statusDetails":"AssertionError: assert 4 == 3\n +  where 4 = int('4')","time":{"start":1729720040153,"stop":1729720075327,"duration":35174}},{"uid":"5633676e93ace4f1","reportUrl":"https://golioth.github.io/allure-reports/branch/1692//#testresult/5633676e93ace4f1","status":"passed","time":{"start":1729717390790,"stop":1729717468467,"duration":77677}},{"uid":"4243fc2bba345f97","reportUrl":"https://golioth.github.io/allure-reports/branch/1687//#testresult/4243fc2bba345f97","status":"broken","statusDetails":"trio.TooSlowError","time":{"start":1729623818515,"stop":1729623838927,"duration":20412}},{"uid":"72ba09776bbaf095","reportUrl":"https://golioth.github.io/allure-reports/branch/1686//#testresult/72ba09776bbaf095","status":"passed","time":{"start":1729525720185,"stop":1729525799874,"duration":79689}},{"uid":"af43c5437b093cb5","reportUrl":"https://golioth.github.io/allure-reports/branch/2//#testresult/af43c5437b093cb5","status":"passed","time":{"start":1729388445771,"stop":1729388523415,"duration":77644}},{"uid":"c02e9e562163d1c8","reportUrl":"https://golioth.github.io/allure-reports/branch/1682//#testresult/c02e9e562163d1c8","status":"passed","time":{"start":1729387721596,"stop":1729387799262,"duration":77666}},{"uid":"2060f1507d56c0dd","reportUrl":"https://golioth.github.io/allure-reports/branch/1682//#testresult/2060f1507d56c0dd","status":"broken","statusDetails":"httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'https://api.golioth.io/v1/projects/firmware_ci/tags/6714365ed72750d65ba9d527'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500","time":{"start":1729377898559,"stop":1729377976246,"duration":77687}},{"uid":"beeb8a87f3cef3bd","reportUrl":"https://golioth.github.io/allure-reports/branch/1673//#testresult/beeb8a87f3cef3bd","status":"passed","time":{"start":1729196610631,"stop":1729196688340,"duration":77709}},{"uid":"3a42db382b819a37","reportUrl":"https://golioth.github.io/allure-reports/branch/1651//#testresult/3a42db382b819a37","status":"passed","time":{"start":1729115180864,"stop":1729115258672,"duration":77808}},{"uid":"422a5550da3f769d","reportUrl":"https://golioth.github.io/allure-reports/branch/1650//#testresult/422a5550da3f769d","status":"passed","time":{"start":1729112135172,"stop":1729112212706,"duration":77534}},{"uid":"2a647cc73ccc220a","reportUrl":"https://golioth.github.io/allure-reports/branch/1648//#testresult/2a647cc73ccc220a","status":"passed","time":{"start":1729107182291,"stop":1729107259798,"duration":77507}}]},"tags":["nrf52840dk","anyio","sams_orange_pi","@pytest.mark.usefixtures('anyio_backend')","zephyr"]},"source":"adcf55d8a7a8c641.json","parameterValues":["'nrf52840dk'","'zephyr'"]}